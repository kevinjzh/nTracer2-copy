(()=>{"use strict";var e={4472:function(e,t,r){e.exports=r.p+"e431fe7ba8d0a870.wasm"},1088:function(e,t,r){e.exports=r.p+"5b383a2480cdc3ac.wasm"},9266:function(e,t,r){e.exports=r.p+"def6161ec2354b02.wasm"},7376:function(e,t,r){let n,i,a;r(549),r(2679);let o=new Map;function s(e,t){o.set(e.id,t)}function c(e,t=1){let r=e.length,n=Array(r),i=n[0]=t;for(let t=1;t<r;++t)i*=e[t-1],n[t]=i;return n}function l(e,t,r){let n=new e.constructor(e.length);for(let i=0;i<t*r;i+=r)for(let a=0;a<r;a++)n[a*t+i/r]=e[i+a];return n}w=self,self.onmessage=async e=>{let{t,id:r,args:n}=e.data;try{let e=o.get(t);if(void 0===e)throw Error(`Internal error: async computation operation ${JSON.stringify(t)} is not registered.  Registered handlers: ${JSON.stringify(Array.from(o.keys()))}`);let{value:i,transfer:a}=await e(...n);w.postMessage({id:r,value:i},{transfer:a})}catch(e){w.postMessage({id:r,error:e})}},self.postMessage(null);class f{data;length=0;constructor(e,t=16){this.data=new e(t)}resize(e){let{data:t}=this;if(e>t.length){let r=new t.constructor(Math.max(e,2*t.length));r.set(t.subarray(0,this.length)),this.data=r}this.length=e}get view(){return this.data.subarray(0,this.length)}shrinkToFit(){this.data=this.data.slice(0,length)}clear(){this.length=0}appendArray(e){let{length:t}=this;this.resize(t+e.length),this.data.set(e,t)}eraseRange(e,t){this.data.copyWithin(e,t,this.length),this.length-=t-e}}let h=Function("outputData","outputOffset","encodingBuffer","indexBuffer","encodedBits","encodedSize32Bits",(()=>{let e="switch (encodedBits) { case 0: break;";for(let t of[1,2,4,8,16,32]){e+=`case ${t}:for (let wordIndex = 0, elementIndex = 0; wordIndex < encodedSize32Bits; ++wordIndex) {let word = 0;`;let r=32/t;for(let n=0;n<r;++n)e+=`word |= indexBuffer[encodingBuffer[elementIndex + ${n}]] << (${n*t});`;e+=`outputData[outputOffset + wordIndex] = word;elementIndex += ${r};} break;`}return e+"}"})());function u(e,t,r,n,i=0,a=c(n,1)){let o=e.length,s=n[3];e.resize(o+s);for(let l=0;l<s;++l)e.data[o+l]=e.length,function(e,t,r,n,i=0,a=c(n,1)){let o=new Map,s=[,,,],l=2;for(let e=0;e<3;++e)l*=s[e]=Math.ceil(n[e]/t[e]);let f=s[0],u=s[1],x=s[2],w=n[0],C=n[1],P=n[2],I=t[0],k=t[1],A=t[2],S=e.length,T=S,M=[0,0,0];e.resize(S+l);let E=a[0],O=a[1],L=a[2];for(let n=0;n<x;++n){M[2]=Math.min(A,P-n*A);for(let s=0;s<u;++s){M[1]=Math.min(k,C-s*k);for(let c=0;c<f;++c){M[0]=Math.min(I,w-c*I);let l=n*A*L+s*k*O+c*I*E,f=e.length-S,[u,x]=function(e,t,r,n,i,a,o,s){let c,l;let f=i[0],u=i[1],x=i[2],w=n[0],C=n[1],P=n[2],I=r[0],k=r[1],A=r[2];if(A-=k*u,k-=I*f,f*u*x==0)return[0,0];let S=w*C*P+31;d.length<S&&(d=new Uint32Array(S),y=new Uint32Array(S),b=new Uint32Array(S));let T=2*Math.ceil(S*(e instanceof Uint32Array?1:2)/2);p.length<T&&(p=new Uint32Array(T),m=new Uint32Array(T),g=new BigUint64Array(p.buffer),v=new BigUint64Array(m.buffer)),e instanceof Uint32Array?(c=p,l=m):(c=g,l=v);let M=d.subarray(0,S);M.fill(0);let E=y,O=b,L=0;{let r=e[t];r?--r:++r;let n=t,i=0,a=w-f,o=w*C-w*u;for(let t=0;t<x;++t,n+=A,i+=o)for(let t=0;t<u;++t,n+=k,i+=a)for(let t=0;t<f;++t,n+=I){let t=e[n];t!==r&&(r=c[L]=t,E[L]=L++),M[i++]=L}}E.subarray(0,L).sort((e,t)=>{let r=c[e],n=c[t];return r<n?-1:r>n?1:0});let D=-1;{let e=c[E[0]];e?--e:++e;for(let t=0;t<L;++t){let r=E[t],n=c[r];n!==e&&(e=l[++D]=n),O[r+1]=D}++D}return function(e,t,r,n,i,a,o,s,c){let l;if(1===i)l=0;else for(l=1;1<<l<i;)l*=2;let f=Math.ceil(l*n/32),u=e.length,d=f,p=!1,m=a.subarray(0,i*c).join(),g=r.get(m);void 0===g&&(p=!0,d+=i*c,g=u+f-t,r.set(m,g)),e.resize(u+d);let v=e.data;if(h(v,u,o,s,l,f),p){let e=u+f;for(let t=0,r=i*c;t<r;++t)v[e++]=a[t]}return[l,g]}(s,a,o,w*C*P,D,m,M,O,e instanceof Uint32Array?1:2)}(r,i+l,a,t,M,S,o,e),C=e.data;C[T++]=x|u<<24,C[T++]=f}}}}(e,t,r,n,i+a[3]*l,a)}let d=new Uint32Array(0),p=d,m=d,g=new BigUint64Array,v=g,y=d,b=d,x=new f(Uint32Array,2e4);s({id:"encodeCompressedSegmentationUint32"},async(e,t,r)=>(x.clear(),u(x,r,e,t),{value:x.view})),s({id:"encodeCompressedSegmentationUint64"},async(e,t,r)=>(x.clear(),u(x,r,e,t),{value:x.view})),!function(e){var t=function(){var e=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);function t(){}function r(e,t,r){return 64*((e.blocksPerLine+1)*t+r)}function n(e){return e<=0?0:e>=255?255:e}return t.prototype={parse:function(t){function n(){var e=t[i]<<8|t[i+1];return i+=2,e}var i=0;t.length;var a=null,o=null,s=[],c=[],l=[],f=n();if(65496!==f)throw"SOI not found";for(f=n();65497!==f;){switch(f){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var h=function(){var e=n(),r=t.subarray(i,i+e-2);return i+=r.length,r}();65504===f&&74===h[0]&&70===h[1]&&73===h[2]&&70===h[3]&&0===h[4]&&(a={version:{major:h[5],minor:h[6]},densityUnits:h[7],xDensity:h[8]<<8|h[9],yDensity:h[10]<<8|h[11],thumbWidth:h[12],thumbHeight:h[13],thumbData:h.subarray(14,14+3*h[12]*h[13])}),65518===f&&65===h[0]&&100===h[1]&&111===h[2]&&98===h[3]&&101===h[4]&&0===h[5]&&(o={version:h[6],flags0:h[7]<<8|h[8],flags1:h[9]<<8|h[10],transformCode:h[11]});break;case 65499:for(var u,d,p,m,g,v,y=n()+i-2;i<y;){var b=t[i++],x=new Uint16Array(64);if(b>>4==0)for(m=0;m<64;m++)x[e[m]]=t[i++];else if(b>>4==1)for(m=0;m<64;m++)x[e[m]]=n();else throw"DQT: invalid table spec";s[15&b]=x}break;case 65472:case 65473:case 65474:if(u)throw"Only single frame JPEGs supported";n(),(u={}).extended=65473===f,u.progressive=65474===f,u.precision=t[i++],u.scanLines=n(),u.samplesPerLine=n(),u.components=[],u.componentIds={};var w,C=t[i++],P=0,I=0;for(p=0;p<C;p++){w=t[i];var k=t[i+1]>>4,A=15&t[i+1];P<k&&(P=k),I<A&&(I=A);var S=t[i+2];g=u.components.push({h:k,v:A,quantizationTable:s[S]}),u.componentIds[w]=g-1,i+=3}u.maxH=P,u.maxV=I,function(e){for(var t=Math.ceil(e.samplesPerLine/8/e.maxH),r=Math.ceil(e.scanLines/8/e.maxV),n=0;n<e.components.length;n++){D=e.components[n];var i=Math.ceil(Math.ceil(e.samplesPerLine/8)*D.h/e.maxH),a=Math.ceil(Math.ceil(e.scanLines/8)*D.v/e.maxV),o=t*D.h,s=64*(r*D.v)*(o+1);D.blockData=new Int16Array(s),D.blocksPerLine=i,D.blocksPerColumn=a}e.mcusPerLine=t,e.mcusPerColumn=r}(u);break;case 65476:var T=n();for(p=2;p<T;){var M=t[i++],E=new Uint8Array(16),O=0;for(m=0;m<16;m++,i++)O+=E[m]=t[i];var L=new Uint8Array(O);for(m=0;m<O;m++,i++)L[m]=t[i];p+=17+O,(M>>4==0?l:c)[15&M]=function(e,t){for(var r,n,i=0,a=[],o=16;o>0&&!e[o-1];)o--;a.push({children:[],index:0});var s,c=a[0];for(r=0;r<o;r++){for(n=0;n<e[r];n++){for((c=a.pop()).children[c.index]=t[i];c.index>0;)c=a.pop();for(c.index++,a.push(c);a.length<=r;)a.push(s={children:[],index:0}),c.children[c.index]=s.children,c=s;i++}r+1<o&&(a.push(s={children:[],index:0}),c.children[c.index]=s.children,c=s)}return a[0].children}(E,L)}break;case 65501:n(),d=n();break;case 65498:n();var D,U=t[i++],z=[];for(p=0;p<U;p++){var F=u.componentIds[t[i++]];D=u.components[F];var B=t[i++];D.huffmanTableDC=l[B>>4],D.huffmanTableAC=c[15&B],z.push(D)}var $=t[i++],R=t[i++],_=t[i++],q=function(t,n,i,a,o,s,c,l,f){i.precision,i.samplesPerLine,i.scanLines;var h,u,d,p=i.mcusPerLine,m=i.progressive;i.maxH,i.maxV;var g=n,v=0,y=0;function b(){if(y>0)return y--,v>>y&1;if(255===(v=t[n++])){var e=t[n++];if(e)throw"unexpected marker: "+(v<<8|e).toString(16)}return y=7,v>>>7}function x(e){for(var t=e;;){if("number"==typeof(t=t[b()]))return t;if("object"!=typeof t)throw"invalid huffman sequence"}}function w(e){for(var t=0;e>0;)t=t<<1|b(),e--;return t}function C(e){if(1===e)return 1===b()?1:-1;var t=w(e);return t>=1<<e-1?t:t+(-1<<e)+1}var P,I=0,k=0,A=a.length;L=m?0===s?0===l?function(e,t){var r=x(e.huffmanTableDC),n=0===r?0:C(r)<<f;e.blockData[t]=e.pred+=n}:function(e,t){e.blockData[t]|=b()<<f}:0===l?function(t,r){if(I>0){I--;return}for(var n=s;n<=c;){var i=x(t.huffmanTableAC),a=15&i,o=i>>4;if(0===a){if(o<15){I=w(o)+(1<<o)-1;break}n+=16;continue}var l=e[n+=o];t.blockData[r+l]=C(a)*(1<<f),n++}}:function(t,r){for(var n,i,a=s,o=0;a<=c;){var l=e[a];switch(k){case 0:if(n=15&(i=x(t.huffmanTableAC)),o=i>>4,0===n)o<15?(I=w(o)+(1<<o),k=4):(o=16,k=1);else{if(1!==n)throw"invalid ACn encoding";P=C(n),k=o?2:3}continue;case 1:case 2:t.blockData[r+l]?t.blockData[r+l]+=b()<<f:0==--o&&(k=2===k?3:0);break;case 3:t.blockData[r+l]?t.blockData[r+l]+=b()<<f:(t.blockData[r+l]=P<<f,k=0);break;case 4:t.blockData[r+l]&&(t.blockData[r+l]+=b()<<f)}a++}4===k&&0==--I&&(k=0)}:function(t,r){var n=x(t.huffmanTableDC),i=0===n?0:C(n);t.blockData[r]=t.pred+=i;for(var a=1;a<64;){var o=x(t.huffmanTableAC),s=15&o,c=o>>4;if(0===s){if(c<15)break;a+=16;continue}var l=e[a+=c];t.blockData[r+l]=C(s),a++}};var S,T,M,E,O,L,D,U=0;for(h=1===A?a[0].blocksPerLine*a[0].blocksPerColumn:p*i.mcusPerColumn,o||(o=h);U<h;){for(T=0;T<A;T++)a[T].pred=0;if(I=0,1===A)for(O=0,S=a[0];O<o;O++)(function(e,t,n){var i=n/e.blocksPerLine|0,a=n%e.blocksPerLine,o=r(e,i,a);t(e,o)})(S,L,U),U++;else for(O=0;O<o;O++){for(T=0;T<A;T++)for(M=0,u=(S=a[T]).h,d=S.v;M<d;M++)for(E=0;E<u;E++)!function(e,t,n,i,a){var o=(n/p|0)*e.v+i,s=n%p*e.h+a,c=r(e,o,s);t(e,c)}(S,L,U,M,E);U++}if(y=0,(D=t[n]<<8|t[n+1])<=65280)throw"marker was not found";if(D>=65488&&D<=65495)n+=2;else break}return n-g}(t,i,u,z,d,$,R,_>>4,15&_);i+=q;break;case 65535:255!==t[i]&&i--;break;default:if(255===t[i-3]&&t[i-2]>=192&&t[i-2]<=254){i-=3;break}throw"unknown JPEG marker "+f.toString(16)}f=n()}for(p=0,this.width=u.samplesPerLine,this.height=u.scanLines,this.jfif=a,this.adobe=o,this.components=[];p<u.components.length;p++)D=u.components[p],this.components.push({output:function(e,t){for(var n=t.blocksPerLine,i=t.blocksPerColumn,a=new Int16Array(64),o=0;o<i;o++)for(var s=0;s<n;s++){var c=r(t,o,s);!function(e,t,r){for(var n,i,a,o,s,c,l,f,h,u,d,p,m,g,v,y,b,x=e.quantizationTable,w=e.blockData,C=0;C<64;C+=8){if(h=w[t+C],u=w[t+C+1],d=w[t+C+2],p=w[t+C+3],m=w[t+C+4],g=w[t+C+5],v=w[t+C+6],y=w[t+C+7],h*=x[C],(u|d|p|m|g|v|y)==0){b=5793*h+512>>10,r[C]=b,r[C+1]=b,r[C+2]=b,r[C+3]=b,r[C+4]=b,r[C+5]=b,r[C+6]=b,r[C+7]=b;continue}u*=x[C+1],d*=x[C+2],p*=x[C+3],m*=x[C+4],g*=x[C+5],v*=x[C+6],y*=x[C+7],n=5793*h+128>>8,i=5793*m+128>>8,a=d,o=v,s=2896*(u-y)+128>>8,f=2896*(u+y)+128>>8,c=p<<4,l=g<<4,i=(n=n+i+1>>1)-i,b=3784*a+1567*o+128>>8,a=1567*a-3784*o+128>>8,o=b,l=(s=s+l+1>>1)-l,c=(f=f+c+1>>1)-c,o=(n=n+o+1>>1)-o,a=(i=i+a+1>>1)-a,b=2276*s+3406*f+2048>>12,s=3406*s-2276*f+2048>>12,f=b,b=799*c+4017*l+2048>>12,c=4017*c-799*l+2048>>12,l=b,r[C]=n+f,r[C+7]=n-f,r[C+1]=i+l,r[C+6]=i-l,r[C+2]=a+c,r[C+5]=a-c,r[C+3]=o+s,r[C+4]=o-s}for(var P=0;P<8;++P){if(h=r[P],u=r[P+8],d=r[P+16],p=r[P+24],m=r[P+32],g=r[P+40],(u|d|p|m|g|(v=r[P+48])|(y=r[P+56]))==0){b=(b=5793*h+8192>>14)<-2040?0:b>=2024?255:b+2056>>4,w[t+P]=b,w[t+P+8]=b,w[t+P+16]=b,w[t+P+24]=b,w[t+P+32]=b,w[t+P+40]=b,w[t+P+48]=b,w[t+P+56]=b;continue}n=5793*h+2048>>12,i=5793*m+2048>>12,a=d,o=v,s=2896*(u-y)+2048>>12,f=2896*(u+y)+2048>>12,c=p,l=g,i=(n=(n+i+1>>1)+4112)-i,b=3784*a+1567*o+2048>>12,a=1567*a-3784*o+2048>>12,o=b,l=(s=s+l+1>>1)-l,c=(f=f+c+1>>1)-c,o=(n=n+o+1>>1)-o,a=(i=i+a+1>>1)-a,b=2276*s+3406*f+2048>>12,s=3406*s-2276*f+2048>>12,f=b,b=799*c+4017*l+2048>>12,c=4017*c-799*l+2048>>12,l=b,h=n+f,y=n-f,u=i+l,v=i-l,d=a+c,g=a-c,h=h<16?0:h>=4080?255:h>>4,u=u<16?0:u>=4080?255:u>>4,d=d<16?0:d>=4080?255:d>>4,p=(p=o+s)<16?0:p>=4080?255:p>>4,m=(m=o-s)<16?0:m>=4080?255:m>>4,g=g<16?0:g>=4080?255:g>>4,v=v<16?0:v>=4080?255:v>>4,y=y<16?0:y>=4080?255:y>>4,w[t+P]=h,w[t+P+8]=u,w[t+P+16]=d,w[t+P+24]=p,w[t+P+32]=m,w[t+P+40]=g,w[t+P+48]=v,w[t+P+56]=y}}(t,c,a)}return t.blockData}(0,D),scaleX:D.h/u.maxH,scaleY:D.v/u.maxV,blocksPerLine:D.blocksPerLine,blocksPerColumn:D.blocksPerColumn});this.numComponents=this.components.length},_getLinearizedBlockData:function(e,t){var r,n,i,a,o,s,c,l,f,h,u,d=this.width/e,p=this.height/t,m=0,g=this.components.length,v=e*t*g,y=new Uint8Array(v),b=new Uint32Array(e);for(c=0;c<g;c++){for(o=0,n=(r=this.components[c]).scaleX*d,i=r.scaleY*p,m=c,u=r.output,a=r.blocksPerLine+1<<3;o<e;o++)l=0|o*n,b[o]=(0xfffffff8&l)<<3|7&l;for(s=0;s<t;s++)for(o=0,h=a*(0xfffffff8&(l=0|s*i))|(7&l)<<3;o<e;o++)y[m]=u[h+b[o]],m+=g}var x=this.decodeTransform;if(x)for(c=0;c<v;)for(l=0,f=0;l<g;l++,c++,f+=2)y[c]=(y[c]*x[f]>>8)+x[f+1];return y},_isColorConversionNeeded:function(){return!!this.adobe&&!!this.adobe.transformCode||3===this.numComponents},_convertYccToRgb:function(e){for(var t,r,i,a=0,o=e.length;a<o;a+=3)t=e[a],r=e[a+1],i=e[a+2],e[a]=n(t-179.456+1.402*i),e[a+1]=n(t+135.459-.344*r-.714*i),e[a+2]=n(t-226.816+1.772*r);return e},_convertYcckToRgb:function(e){for(var t,r,i,a,o=0,s=0,c=e.length;s<c;s+=4){t=e[s],r=e[s+1];var l=-122.67195406894+r*(-660635669420364e-19*r+437130475926232e-18*(i=e[s+2])-54080610064599e-18*t+48449797120281e-17*(a=e[s+3])-.154362151871126)+i*(-957964378445773e-18*i+817076911346625e-18*t-.00477271405408747*a+1.53380253221734)+t*(961250184130688e-18*t-.00266257332283933*a+.48357088451265)+a*(-336197177618394e-18*a+.484791561490776),f=107.268039397724+r*(219927104525741e-19*r-640992018297945e-18*i+659397001245577e-18*t+426105652938837e-18*a-.176491792462875)+i*(-778269941513683e-18*i+.00130872261408275*t+770482631801132e-18*a-.151051492775562)+t*(.00126935368114843*t-.00265090189010898*a+.25802910206845)+a*(-318913117588328e-18*a-.213742400323665),h=-20.810012546947+r*(-570115196973677e-18*r-263409051004589e-19*i+.0020741088115012*t-.00288260236853442*a+.814272968359295)+i*(-153496057440975e-19*i-132689043961446e-18*t+560833691242812e-18*a-.195152027534049)+t*(.00174418132927582*t-.00255243321439347*a+.116935020465145)+a*(-343531996510555e-18*a+.24165260232407);e[o++]=n(l),e[o++]=n(f),e[o++]=n(h)}return e},_convertYcckToCmyk:function(e){for(var t,r,i,a=0,o=e.length;a<o;a+=4)t=e[a],r=e[a+1],i=e[a+2],e[a]=n(434.456-t-1.402*i),e[a+1]=n(119.541-t+.344*r+.714*i),e[a+2]=n(481.816-t-1.772*r);return e},_convertCmykToRgb:function(e){for(var t,r,n,i,a=0,o=1/255/255,s=0,c=e.length;s<c;s+=4){t=e[s],r=e[s+1];var l=t*(-4.387332384609988*t+54.48615194189176*r+18.82290502165302*(n=e[s+2])+212.25662451639585*(i=e[s+3])-72734.4411664936)+r*(1.7149763477362134*r-5.6096736904047315*n-17.873870861415444*i-1401.7366389350734)+n*(-2.5217340131683033*n-21.248923337353073*i+4465.541406466231)-i*(21.86122147463605*i+48317.86113160301),f=t*(8.841041422036149*t+60.118027045597366*r+6.871425592049007*n+31.159100130055922*i-20220.756542821975)+r*(-15.310361306967817*r+17.575251261109482*n+131.35250912493976*i-48691.05921601825)+n*(4.444339102852739*n+9.8632861493405*i-6341.191035517494)-i*(20.737325471181034*i+47890.15695978492),h=t*(.8842522430003296*t+8.078677503112928*r+30.89978309703729*n-.23883238689178934*i-3616.812083916688)+r*(10.49593273432072*r+63.02378494754052*n+50.606957656360734*i-28620.90484698408)+n*(.03296041114873217*n+115.60384449646641*i-49363.43385999684)-i*(22.33816807309886*i+45932.16563550634);e[a++]=l>=0?255:l<=-0xfd02ff?0:255+l*o|0,e[a++]=f>=0?255:f<=-0xfd02ff?0:255+f*o|0,e[a++]=h>=0?255:h<=-0xfd02ff?0:255+h*o|0}return e},getData:function(e,t,r){if(this.numComponents>4)throw"Unsupported color mode";var n=this._getLinearizedBlockData(e,t);if(3===this.numComponents)return this._convertYccToRgb(n);if(4===this.numComponents){if(this._isColorConversionNeeded())return r?this._convertYcckToRgb(n):this._convertYcckToCmyk(n);if(r)return this._convertCmykToRgb(n)}return n}},t}(),r=function(){var e=[{qe:22017,nmps:1,nlps:1,switchFlag:1},{qe:13313,nmps:2,nlps:6,switchFlag:0},{qe:6145,nmps:3,nlps:9,switchFlag:0},{qe:2753,nmps:4,nlps:12,switchFlag:0},{qe:1313,nmps:5,nlps:29,switchFlag:0},{qe:545,nmps:38,nlps:33,switchFlag:0},{qe:22017,nmps:7,nlps:6,switchFlag:1},{qe:21505,nmps:8,nlps:14,switchFlag:0},{qe:18433,nmps:9,nlps:14,switchFlag:0},{qe:14337,nmps:10,nlps:14,switchFlag:0},{qe:12289,nmps:11,nlps:17,switchFlag:0},{qe:9217,nmps:12,nlps:18,switchFlag:0},{qe:7169,nmps:13,nlps:20,switchFlag:0},{qe:5633,nmps:29,nlps:21,switchFlag:0},{qe:22017,nmps:15,nlps:14,switchFlag:1},{qe:21505,nmps:16,nlps:14,switchFlag:0},{qe:20737,nmps:17,nlps:15,switchFlag:0},{qe:18433,nmps:18,nlps:16,switchFlag:0},{qe:14337,nmps:19,nlps:17,switchFlag:0},{qe:13313,nmps:20,nlps:18,switchFlag:0},{qe:12289,nmps:21,nlps:19,switchFlag:0},{qe:10241,nmps:22,nlps:19,switchFlag:0},{qe:9217,nmps:23,nlps:20,switchFlag:0},{qe:8705,nmps:24,nlps:21,switchFlag:0},{qe:7169,nmps:25,nlps:22,switchFlag:0},{qe:6145,nmps:26,nlps:23,switchFlag:0},{qe:5633,nmps:27,nlps:24,switchFlag:0},{qe:5121,nmps:28,nlps:25,switchFlag:0},{qe:4609,nmps:29,nlps:26,switchFlag:0},{qe:4353,nmps:30,nlps:27,switchFlag:0},{qe:2753,nmps:31,nlps:28,switchFlag:0},{qe:2497,nmps:32,nlps:29,switchFlag:0},{qe:2209,nmps:33,nlps:30,switchFlag:0},{qe:1313,nmps:34,nlps:31,switchFlag:0},{qe:1089,nmps:35,nlps:32,switchFlag:0},{qe:673,nmps:36,nlps:33,switchFlag:0},{qe:545,nmps:37,nlps:34,switchFlag:0},{qe:321,nmps:38,nlps:35,switchFlag:0},{qe:273,nmps:39,nlps:36,switchFlag:0},{qe:133,nmps:40,nlps:37,switchFlag:0},{qe:73,nmps:41,nlps:38,switchFlag:0},{qe:37,nmps:42,nlps:39,switchFlag:0},{qe:21,nmps:43,nlps:40,switchFlag:0},{qe:9,nmps:44,nlps:41,switchFlag:0},{qe:5,nmps:45,nlps:42,switchFlag:0},{qe:1,nmps:45,nlps:43,switchFlag:0},{qe:22017,nmps:46,nlps:46,switchFlag:0}];function t(e,t,r){this.data=e,this.bp=t,this.dataEnd=r,this.chigh=e[t],this.clow=0,this.byteIn(),this.chigh=this.chigh<<7&65535|this.clow>>9&127,this.clow=this.clow<<7&65535,this.ct-=7,this.a=32768}return t.prototype={byteIn:function(){var e=this.data,t=this.bp;255===e[t]?e[t+1]>143?(this.clow+=65280,this.ct=8):(t++,this.clow+=e[t]<<9,this.ct=7,this.bp=t):(t++,this.clow+=t<this.dataEnd?e[t]<<8:65280,this.ct=8,this.bp=t),this.clow>65535&&(this.chigh+=this.clow>>16,this.clow&=65535)},readBit:function(t,r){var n,i=t[r]>>1,a=1&t[r],o=e[i],s=o.qe,c=this.a-s;if(this.chigh<s)c<s?(c=s,n=a,i=o.nmps):(c=s,n=1^a,1===o.switchFlag&&(a=n),i=o.nlps);else{if(this.chigh-=s,(32768&c)!=0)return this.a=c,a;c<s?(n=1^a,1===o.switchFlag&&(a=n),i=o.nlps):(n=a,i=o.nmps)}do 0===this.ct&&this.byteIn(),c<<=1,this.chigh=this.chigh<<1&65535|this.clow>>15&1,this.clow=this.clow<<1&65535,this.ct--;while((32768&c)==0);return this.a=c,t[r]=i<<1|a,n}},t}(),n=function(){var e={LL:0,LH:1,HL:1,HH:2};function t(){this.failOnCorruptedImage=!1}function n(e,t,r){var n,i,a,o,s=r.xcb_,c=r.ycb_,l=1<<s,f=1<<c,h=t.tbx0>>s,u=t.tby0>>c,d=t.tbx1+l-1>>s,p=t.tby1+f-1>>c,m=t.resolution.precinctParameters,g=[],v=[];for(i=u;i<p;i++)for(n=h;n<d;n++)if((a={cbx:n,cby:i,tbx0:l*n,tby0:f*i,tbx1:l*(n+1),tby1:f*(i+1)}).tbx0_=Math.max(t.tbx0,a.tbx0),a.tby0_=Math.max(t.tby0,a.tby0),a.tbx1_=Math.min(t.tbx1,a.tbx1),a.tby1_=Math.min(t.tby1,a.tby1),o=Math.floor((a.tbx0_-t.tbx0)/m.precinctWidthInSubband)+Math.floor((a.tby0_-t.tby0)/m.precinctHeightInSubband)*m.numprecinctswide,a.precinctNumber=o,a.subbandType=t.type,a.Lblock=3,!(a.tbx1_<=a.tbx0_)&&!(a.tby1_<=a.tby0_)){g.push(a);var y=v[o];void 0!==y?(n<y.cbxMin?y.cbxMin=n:n>y.cbxMax&&(y.cbxMax=n),i<y.cbyMin?y.cbxMin=i:i>y.cbyMax&&(y.cbyMax=i)):v[o]=y={cbxMin:n,cbyMin:i,cbxMax:n,cbyMax:i},a.precinct=y}t.codeblockParameters={codeblockWidth:s,codeblockHeight:c,numcodeblockwide:d-h+1,numcodeblockhigh:p-u+1},t.codeblocks=g,t.precincts=v}function i(e,t,r){for(var n=[],i=e.subbands,a=0,o=i.length;a<o;a++)for(var s=i[a].codeblocks,c=0,l=s.length;c<l;c++){var f=s[c];f.precinctNumber===t&&n.push(f)}return{layerNumber:r,codeblocks:n}}function o(e){for(var t=e.SIZ,r=e.currentTile.index,n=e.tiles[r],a=n.codingStyleDefaultParameters.layersCount,o=t.Csiz,s=0,c=0;c<o;c++)s=Math.max(s,n.components[c].codingStyleParameters.decompositionLevelsCount);var l=0,f=0,h=0,u=0;this.nextPacket=function(){for(;l<a;l++){for(;f<=s;f++){for(;h<o;h++){var e=n.components[h];if(!(f>e.codingStyleParameters.decompositionLevelsCount)){for(var t=e.resolutions[f],r=t.precinctParameters.numprecincts;u<r;){var c=i(t,u,l);return u++,c}u=0}}h=0}f=0}throw Error("JPX Error: Out of packets")}}function l(e){for(var t=e.SIZ,r=e.currentTile.index,n=e.tiles[r],a=n.codingStyleDefaultParameters.layersCount,o=t.Csiz,s=0,c=0;c<o;c++)s=Math.max(s,n.components[c].codingStyleParameters.decompositionLevelsCount);var l=0,f=0,h=0,u=0;this.nextPacket=function(){for(;l<=s;l++){for(;f<a;f++){for(;h<o;h++){var e=n.components[h];if(!(l>e.codingStyleParameters.decompositionLevelsCount)){for(var t=e.resolutions[l],r=t.precinctParameters.numprecincts;u<r;){var c=i(t,u,f);return u++,c}u=0}}h=0}f=0}throw Error("JPX Error: Out of packets")}}function f(e){var t,r,n,a,o=e.SIZ,s=e.currentTile.index,c=e.tiles[s],l=c.codingStyleDefaultParameters.layersCount,f=o.Csiz,h=0;for(n=0;n<f;n++){var u=c.components[n];h=Math.max(h,u.codingStyleParameters.decompositionLevelsCount)}var d=new Int32Array(h+1);for(r=0;r<=h;++r){var p=0;for(n=0;n<f;++n){var m=c.components[n].resolutions;r<m.length&&(p=Math.max(p,m[r].precinctParameters.numprecincts))}d[r]=p}t=0,r=0,n=0,a=0,this.nextPacket=function(){for(;r<=h;r++){for(;a<d[r];a++){for(;n<f;n++){var e=c.components[n];if(!(r>e.codingStyleParameters.decompositionLevelsCount)){var o=e.resolutions[r],s=o.precinctParameters.numprecincts;if(!(a>=s)){for(;t<l;){var u=i(o,a,t);return t++,u}t=0}}}n=0}a=0}throw Error("JPX Error: Out of packets")}}function d(e){var t=e.SIZ,r=e.currentTile.index,n=e.tiles[r],a=n.codingStyleDefaultParameters.layersCount,o=t.Csiz,s=g(n),c=0,l=0,f=0,h=0,u=0;this.nextPacket=function(){for(;u<s.maxNumHigh;u++){for(;h<s.maxNumWide;h++){for(;f<o;f++){for(var e=n.components[f],t=e.codingStyleParameters.decompositionLevelsCount;l<=t;l++){var r=e.resolutions[l],d=s.components[f].resolutions[l],p=m(h,u,d,s,r);if(null!==p){for(;c<a;){var g=i(r,p,c);return c++,g}c=0}}l=0}f=0}h=0}throw Error("JPX Error: Out of packets")}}function p(e){var t=e.SIZ,r=e.currentTile.index,n=e.tiles[r],a=n.codingStyleDefaultParameters.layersCount,o=t.Csiz,s=g(n),c=0,l=0,f=0,h=0,u=0;this.nextPacket=function(){for(;f<o;++f){for(var e=n.components[f],t=s.components[f],r=e.codingStyleParameters.decompositionLevelsCount;u<t.maxNumHigh;u++){for(;h<t.maxNumWide;h++){for(;l<=r;l++){var d=e.resolutions[l],p=t.resolutions[l],g=m(h,u,p,t,d);if(null!==g){for(;c<a;){var v=i(d,g,c);return c++,v}c=0}}l=0}h=0}u=0}throw Error("JPX Error: Out of packets")}}function m(e,t,r,n,i){var a=e*n.minWidth,o=t*n.minHeight;if(a%r.width!=0||o%r.height!=0)return null;var s=o/r.width*i.precinctParameters.numprecinctswide;return a/r.height+s}function g(e){for(var t=e.components.length,r=Number.MAX_VALUE,n=Number.MAX_VALUE,i=0,a=0,o=Array(t),s=0;s<t;s++){for(var c=e.components[s],l=c.codingStyleParameters.decompositionLevelsCount,f=Array(l+1),h=Number.MAX_VALUE,u=Number.MAX_VALUE,d=0,p=0,m=1,g=l;g>=0;--g){var v=c.resolutions[g],y=m*v.precinctParameters.precinctWidth,b=m*v.precinctParameters.precinctHeight;h=Math.min(h,y),u=Math.min(u,b),d=Math.max(d,v.precinctParameters.numprecinctswide),p=Math.max(p,v.precinctParameters.numprecinctshigh),f[g]={width:y,height:b},m<<=1}r=Math.min(r,h),n=Math.min(n,u),i=Math.max(i,d),a=Math.max(a,p),o[s]={resolutions:f,minWidth:h,minHeight:u,maxNumWide:d,maxNumHigh:p}}return{components:o,minWidth:r,minHeight:n,maxNumWide:i,maxNumHigh:a}}t.prototype={parse:function(e){if(65359===s(e,0)){this.parseCodestream(e,0,e.length);return}for(var t=0,r=e.length;t<r;){var n=8,i=c(e,t),a=c(e,t+4);if(t+=n,1===i&&(i=0x100000000*c(e,t)+c(e,t+4),t+=8,n+=8),0===i&&(i=r-t+n),i<n)throw Error("JPX Error: Invalid box field size");var o=i-n,l=!0;switch(a){case 0x6a703268:l=!1;break;case 0x636f6c72:var f=e[t];if(e[t+1],e[t+2],1===f){var d=c(e,t+3);switch(d){case 16:case 17:case 18:break;default:h("Unknown colorspace "+d)}}else 2===f&&u("ICC profile not supported");break;case 0x6a703263:this.parseCodestream(e,t,t+o);break;case 1783636e3:0xd0a870a!==c(e,t)&&h("Invalid JP2 signature");break;case 0x6a501a1a:case 0x66747970:case 0x72726571:case 0x72657320:case 0x69686472:break;default:var p=String.fromCharCode(a>>24&255,a>>16&255,a>>8&255,255&a);h("Unsupported header type "+a+" ("+p+")")}l&&(t+=o)}},parseImageProperties:function(e){for(var t=e.getByte();t>=0;)if(65361==(t<<8|(t=e.getByte()))){e.skip(4);var r=e.getInt32()>>>0,n=e.getInt32()>>>0,i=e.getInt32()>>>0,a=e.getInt32()>>>0;e.skip(16);var o=e.getUint16();this.width=r-i,this.height=n-a,this.componentsCount=o,this.bitsPerComponent=8;return}throw Error("JPX Error: No size marker found in JPX stream")},parseCodestream:function(t,i,u){var m={};try{for(var g=!1,x=i;x+1<u;){var P=s(t,x);x+=2;var I,k,A,S,T,M,E=0;switch(P){case 65359:m.mainHeader=!0;break;case 65497:break;case 65361:E=s(t,x);var O={};O.Xsiz=c(t,x+4),O.Ysiz=c(t,x+8),O.XOsiz=c(t,x+12),O.YOsiz=c(t,x+16),O.XTsiz=c(t,x+20),O.YTsiz=c(t,x+24),O.XTOsiz=c(t,x+28),O.YTOsiz=c(t,x+32);var L=s(t,x+36);O.Csiz=L;var D=[];I=x+38;for(var U=0;U<L;U++){var z,F,B={precision:(127&t[I])+1,isSigned:!!(128&t[I]),XRsiz:t[I+1],YRsiz:t[I+1]};z=B,F=O,z.x0=Math.ceil(F.XOsiz/z.XRsiz),z.x1=Math.ceil(F.Xsiz/z.XRsiz),z.y0=Math.ceil(F.YOsiz/z.YRsiz),z.y1=Math.ceil(F.Ysiz/z.YRsiz),z.width=z.x1-z.x0,z.height=z.y1-z.y0,D.push(B)}m.SIZ=O,m.components=D,function(e,t){for(var r,n=e.SIZ,i=[],a=Math.ceil((n.Xsiz-n.XTOsiz)/n.XTsiz),o=Math.ceil((n.Ysiz-n.YTOsiz)/n.YTsiz),s=0;s<o;s++)for(var c=0;c<a;c++)(r={}).tx0=Math.max(n.XTOsiz+c*n.XTsiz,n.XOsiz),r.ty0=Math.max(n.YTOsiz+s*n.YTsiz,n.YOsiz),r.tx1=Math.min(n.XTOsiz+(c+1)*n.XTsiz,n.Xsiz),r.ty1=Math.min(n.YTOsiz+(s+1)*n.YTsiz,n.Ysiz),r.width=r.tx1-r.tx0,r.height=r.ty1-r.ty0,r.components=[],i.push(r);e.tiles=i;for(var l=n.Csiz,f=0;f<l;f++)for(var h=t[f],u=0,d=i.length;u<d;u++){var p={};r=i[u],p.tcx0=Math.ceil(r.tx0/h.XRsiz),p.tcy0=Math.ceil(r.ty0/h.YRsiz),p.tcx1=Math.ceil(r.tx1/h.XRsiz),p.tcy1=Math.ceil(r.ty1/h.YRsiz),p.width=p.tcx1-p.tcx0,p.height=p.tcy1-p.tcy0,r.components[f]=p}}(m,D),m.QCC=[],m.COC=[];break;case 65372:E=s(t,x);var $={};switch(I=x+2,k=t[I++],31&k){case 0:S=8,T=!0;break;case 1:S=16,T=!1;break;case 2:S=16,T=!0;break;default:throw Error("JPX Error: Invalid SQcd value "+k)}for($.noQuantization=8===S,$.scalarExpounded=T,$.guardBits=k>>5,A=[];I<E+x;){var R={};8===S?(R.epsilon=t[I++]>>3,R.mu=0):(R.epsilon=t[I]>>3,R.mu=(7&t[I])<<8|t[I+1],I+=2),A.push(R)}$.SPqcds=A,m.mainHeader?m.QCD=$:(m.currentTile.QCD=$,m.currentTile.QCC=[]);break;case 65373:E=s(t,x);var _,q={};switch(I=x+2,m.SIZ.Csiz<257?_=t[I++]:(_=s(t,I),I+=2),k=t[I++],31&k){case 0:S=8,T=!0;break;case 1:S=16,T=!1;break;case 2:S=16,T=!0;break;default:throw Error("JPX Error: Invalid SQcd value "+k)}for(q.noQuantization=8===S,q.scalarExpounded=T,q.guardBits=k>>5,A=[];I<E+x;)R={},8===S?(R.epsilon=t[I++]>>3,R.mu=0):(R.epsilon=t[I]>>3,R.mu=(7&t[I])<<8|t[I+1],I+=2),A.push(R);q.SPqcds=A,m.mainHeader?m.QCC[_]=q:m.currentTile.QCC[_]=q;break;case 65362:E=s(t,x);var J={};I=x+2;var N=t[I++];J.entropyCoderWithCustomPrecincts=!!(1&N),J.sopMarkerUsed=!!(2&N),J.ephMarkerUsed=!!(4&N),J.progressionOrder=t[I++],J.layersCount=s(t,I),I+=2,J.multipleComponentTransform=t[I++],J.decompositionLevelsCount=t[I++],J.xcb=(15&t[I++])+2,J.ycb=(15&t[I++])+2;var X=t[I++];if(J.selectiveArithmeticCodingBypass=!!(1&X),J.resetContextProbabilities=!!(2&X),J.terminationOnEachCodingPass=!!(4&X),J.verticalyStripe=!!(8&X),J.predictableTermination=!!(16&X),J.segmentationSymbolUsed=!!(32&X),J.reversibleTransformation=t[I++],J.entropyCoderWithCustomPrecincts){for(var H=[];I<E+x;){var G=t[I++];H.push({PPx:15&G,PPy:G>>4})}J.precinctsSizes=H}var Y=[];if(J.selectiveArithmeticCodingBypass&&Y.push("selectiveArithmeticCodingBypass"),J.resetContextProbabilities&&Y.push("resetContextProbabilities"),J.terminationOnEachCodingPass&&Y.push("terminationOnEachCodingPass"),J.verticalyStripe&&Y.push("verticalyStripe"),J.predictableTermination&&Y.push("predictableTermination"),Y.length>0)throw g=!0,Error("JPX Error: Unsupported COD options ("+Y.join(", ")+")");m.mainHeader?m.COD=J:(m.currentTile.COD=J,m.currentTile.COC=[]);break;case 65424:E=s(t,x),(M={}).index=s(t,x+2),M.length=c(t,x+4),M.dataEnd=M.length+x-2,M.partIndex=t[x+8],M.partsCount=t[x+9],m.mainHeader=!1,0===M.partIndex&&(M.COD=m.COD,M.COC=m.COC.slice(0),M.QCD=m.QCD,M.QCC=m.QCC.slice(0)),m.currentTile=M;break;case 65427:M=m.currentTile,0===M.partIndex&&(function(e,t){for(var r=e.SIZ.Csiz,n=e.tiles[t],i=0;i<r;i++){var a=n.components[i],o=void 0!==e.currentTile.QCC[i]?e.currentTile.QCC[i]:e.currentTile.QCD;a.quantizationParameters=o;var s=void 0!==e.currentTile.COC[i]?e.currentTile.COC[i]:e.currentTile.COD;a.codingStyleParameters=s}n.codingStyleDefaultParameters=e.currentTile.COD}(m,M.index),function(e){for(var t=e.SIZ,r=e.currentTile.index,i=e.tiles[r],a=t.Csiz,s=0;s<a;s++){for(var c=i.components[s],h=c.codingStyleParameters.decompositionLevelsCount,u=[],m=[],g=0;g<=h;g++){var v,y=function(e,t,r){var n=t.codingStyleParameters,i={};return n.entropyCoderWithCustomPrecincts?(i.PPx=n.precinctsSizes[r].PPx,i.PPy=n.precinctsSizes[r].PPy):(i.PPx=15,i.PPy=15),i.xcb_=r>0?Math.min(n.xcb,i.PPx-1):Math.min(n.xcb,i.PPx),i.ycb_=r>0?Math.min(n.ycb,i.PPy-1):Math.min(n.ycb,i.PPy),i}(0,c,g),b={},x=1<<h-g;if(b.trx0=Math.ceil(c.tcx0/x),b.try0=Math.ceil(c.tcy0/x),b.trx1=Math.ceil(c.tcx1/x),b.try1=Math.ceil(c.tcy1/x),b.resLevel=g,function(e,t,r){var n=1<<r.PPx,i=1<<r.PPy,a=0===t.resLevel,o=1<<r.PPx+(a?0:-1),s=1<<r.PPy+(a?0:-1),c=t.trx1>t.trx0?Math.ceil(t.trx1/n)-Math.floor(t.trx0/n):0,l=t.try1>t.try0?Math.ceil(t.try1/i)-Math.floor(t.try0/i):0;t.precinctParameters={precinctWidth:n,precinctHeight:i,numprecinctswide:c,numprecinctshigh:l,numprecincts:c*l,precinctWidthInSubband:o,precinctHeightInSubband:s}}(0,b,y),u.push(b),0===g)(v={}).type="LL",v.tbx0=Math.ceil(c.tcx0/x),v.tby0=Math.ceil(c.tcy0/x),v.tbx1=Math.ceil(c.tcx1/x),v.tby1=Math.ceil(c.tcy1/x),v.resolution=b,n(e,v,y),m.push(v),b.subbands=[v];else{var w=1<<h-g+1,C=[];(v={}).type="HL",v.tbx0=Math.ceil(c.tcx0/w-.5),v.tby0=Math.ceil(c.tcy0/w),v.tbx1=Math.ceil(c.tcx1/w-.5),v.tby1=Math.ceil(c.tcy1/w),v.resolution=b,n(e,v,y),m.push(v),C.push(v),(v={}).type="LH",v.tbx0=Math.ceil(c.tcx0/w),v.tby0=Math.ceil(c.tcy0/w-.5),v.tbx1=Math.ceil(c.tcx1/w),v.tby1=Math.ceil(c.tcy1/w-.5),v.resolution=b,n(e,v,y),m.push(v),C.push(v),(v={}).type="HH",v.tbx0=Math.ceil(c.tcx0/w-.5),v.tby0=Math.ceil(c.tcy0/w-.5),v.tbx1=Math.ceil(c.tcx1/w-.5),v.tby1=Math.ceil(c.tcy1/w-.5),v.resolution=b,n(e,v,y),m.push(v),C.push(v),b.subbands=C}}c.resolutions=u,c.subbands=m}var P=i.codingStyleDefaultParameters.progressionOrder;switch(P){case 0:i.packetsIterator=new o(e);break;case 1:i.packetsIterator=new l(e);break;case 2:i.packetsIterator=new f(e);break;case 3:i.packetsIterator=new d(e);break;case 4:i.packetsIterator=new p(e);break;default:throw Error("JPX Error: Unsupported progression order "+P)}}(m)),E=M.dataEnd-x,function(e,t,r,n){var i,o=0,s=0,c=!1;function l(e){for(;s<e;){var n=t[r+o];o++,c?(i=i<<7|n,s+=7,c=!1):(i=i<<8|n,s+=8),255===n&&(c=!0)}return s-=e,i>>>s&(1<<e)-1}function f(e){return 255===t[r+o-1]&&t[r+o]===e?(o+=1,!0):255===t[r+o]&&t[r+o+1]===e&&(o+=2,!0)}function h(){s=0,c&&(o++,c=!1)}for(var u=e.currentTile.index,d=e.tiles[u],p=e.COD.sopMarkerUsed,m=e.COD.ephMarkerUsed,g=d.packetsIterator;o<n;){h(),p&&f(145)&&(o+=4);var b=g.nextPacket();if(l(1)){for(var x,w=b.layerNumber,C=[],P=0,I=b.codeblocks.length;P<I;P++){var k=(x=b.codeblocks[P]).precinct,A=x.cbx-k.cbxMin,S=x.cby-k.cbyMin,T=!1,M=!1;if(void 0!==x.included)T=!!l(1);else{if(void 0!==(k=x.precinct).inclusionTree)O=k.inclusionTree;else{var E,O,L,D=k.cbxMax-k.cbxMin+1,U=k.cbyMax-k.cbyMin+1;O=new y(D,U,w),L=new v(D,U),k.inclusionTree=O,k.zeroBitPlanesTree=L}if(O.reset(A,S,w))for(;;)if(l(1)){if(!O.nextLevel()){x.included=!0,T=M=!0;break}}else{O.incrementValue(w);break}}if(T){if(M){for((L=k.zeroBitPlanesTree).reset(A,S);;)if(l(1)){if(!L.nextLevel())break}else L.incrementValue();x.zeroBitPlanes=L.value}for(var z=function(){if(0===l(1))return 1;if(0===l(1))return 2;var e=l(2);return e<3?e+3:(e=l(5))<31?e+6:(e=l(7))+37}();l(1);)x.Lblock++;var F=a(z),B=l((z<1<<F?F-1:F)+x.Lblock);C.push({codeblock:x,codingpasses:z,dataLength:B})}}for(h(),m&&f(146);C.length>0;){var $=C.shift();void 0===(x=$.codeblock).data&&(x.data=[]),x.data.push({data:t,start:r+o,end:r+o+$.dataLength,codingpasses:$.codingpasses}),o+=$.dataLength}}}}(m,t,x,E);break;case 65365:case 65367:case 65368:case 65380:E=s(t,x);break;case 65363:throw Error("JPX Error: Codestream code 0xFF53 (COC) is not implemented");default:throw Error("JPX Error: Unknown codestream code: "+P.toString(16))}x+=E}}catch(e){if(g||this.failOnCorruptedImage)throw e;h("Trying to recover from "+e.message)}this.tiles=function(t){for(var n=t.SIZ,i=t.components,a=n.Csiz,o=[],s=0,c=t.tiles.length;s<c;s++){var l=t.tiles[s],f=[];for(h=0;h<a;h++)f[h]=function(t,n,i){for(var a=n.components[i],o=a.codingStyleParameters,s=a.quantizationParameters,c=o.decompositionLevelsCount,l=s.SPqcds,f=s.scalarExpounded,h=s.guardBits,u=o.segmentationSymbolUsed,d=t.components[i].precision,p=o.reversibleTransformation,m=p?new C:new w,g=[],v=0,y=0;y<=c;y++){for(var x=a.resolutions[y],P=x.trx1-x.trx0,I=x.try1-x.try0,k=new Float32Array(P*I),A=0,S=x.subbands.length;A<S;A++){f?(T=l[v].mu,M=l[v].epsilon,v++):(T=l[0].mu,M=l[0].epsilon+(y>0?1-y:0));var T,M,E=x.subbands[A],O=e[E.type];!function(e,t,n,i,a,o,s,c){for(var l=i.tbx0,f=i.tby0,h=i.tbx1-i.tbx0,u=i.codeblocks,d="H"===i.type.charAt(0)?1:0,p="H"===i.type.charAt(1)?t:0,m=0,g=u.length;m<g;++m){var v,y,x,w,C,P,I,k,A=u[m],S=A.tbx1_-A.tbx0_,T=A.tby1_-A.tby0_;if(0!==S&&0!==T&&void 0!==A.data){v=new b(S,T,A.subbandType,A.zeroBitPlanes,o),y=2;var M=A.data,E=0,O=0;for(x=0,w=M.length;x<w;x++)E+=(C=M[x]).end-C.start,O+=C.codingpasses;var L=new Uint8Array(E),D=0;for(x=0,w=M.length;x<w;x++){var U=(C=M[x]).data.subarray(C.start,C.end);L.set(U,D),D+=U.length}var z=new r(L,0,E);for(v.setDecoder(z),x=0;x<O;x++){switch(y){case 0:v.runSignificancePropogationPass();break;case 1:v.runMagnitudeRefinementPass();break;case 2:v.runCleanupPass(),c&&v.checkSegmentationSymbol()}y=(y+1)%3}var F=A.tbx0_-l+(A.tby0_-f)*h,B=v.coefficentsSign,$=v.coefficentsMagnitude,R=v.bitsDecoded,_=s?0:.5;D=0;var q="LL"!==i.type;for(x=0;x<T;x++){var J=2*(F/h|0)*(t-h)+d+p;for(P=0;P<S;P++){if(0!==(I=$[D])){I=(I+_)*a,0!==B[D]&&(I=-I),k=R[D];var N=q?J+(F<<1):F;s&&k>=o?e[N]=I:e[N]=I*(1<<o-k)}F++,D++}F+=h-S}}}}(k,P,0,E,p?1:Math.pow(2,d+O-M)*(1+T/2048),h+M-1,p,u)}g.push({width:P,height:I,items:k})}var L=m.calculate(g,a.tcx0,a.tcy0);return{left:a.tcx0,top:a.tcy0,width:L.width,height:L.height,items:L.items}}(t,l,h);var h,u,d,p,m,g,v,y,x,P,I,k,A,S,T,M,E=f[0],O=new Uint8Array(E.items.length*a),L={left:E.left,top:E.top,width:E.width,height:E.height,items:O},D=0;if(l.codingStyleDefaultParameters.multipleComponentTransform){var U=4===a,z=f[0].items,F=f[1].items,B=f[2].items,$=U?f[3].items:null;d=(128<<(u=i[0].precision-8))+.5,m=-(g=.5*(p=255*(1<<u)));var R=l.components[0],_=a-3;if(y=z.length,R.codingStyleParameters.reversibleTransformation)for(v=0;v<y;v++,D+=_)x=z[v]+d,P=F[v],k=(A=x-((I=B[v])+P>>2))+I,S=A+P,O[D++]=k<=0?0:k>=p?255:k>>u,O[D++]=A<=0?0:A>=p?255:A>>u,O[D++]=S<=0?0:S>=p?255:S>>u;else for(v=0;v<y;v++,D+=_)x=z[v]+d,P=F[v],k=x+1.402*(I=B[v]),A=x-.34413*P-.71414*I,S=x+1.772*P,O[D++]=k<=0?0:k>=p?255:k>>u,O[D++]=A<=0?0:A>=p?255:A>>u,O[D++]=S<=0?0:S>=p?255:S>>u;if(U)for(v=0,D=3;v<y;v++,D+=4)T=$[v],O[D]=T<=m?0:T>=g?255:T+d>>u}else for(h=0;h<a;h++){var q=f[h].items;for(d=(128<<(u=i[h].precision-8))+.5,m=-(p=127.5*(1<<u)),D=h,v=0,y=q.length;v<y;v++)M=q[v],O[D]=M<=m?0:M>=p?255:M+d>>u,D+=a}o.push(L)}return o}(m),this.width=m.SIZ.Xsiz-m.SIZ.XOsiz,this.height=m.SIZ.Ysiz-m.SIZ.YOsiz,this.componentsCount=m.SIZ.Csiz}};var v=function(){function e(e,t){var r=a(Math.max(e,t))+1;this.levels=[];for(var n=0;n<r;n++){var i={width:e,height:t,items:[]};this.levels.push(i),e=Math.ceil(e/2),t=Math.ceil(t/2)}}return e.prototype={reset:function(e,t){for(var r,n=0,i=0;n<this.levels.length;){var a=e+t*(r=this.levels[n]).width;if(void 0!==r.items[a]){i=r.items[a];break}r.index=a,e>>=1,t>>=1,n++}n--,(r=this.levels[n]).items[r.index]=i,this.currentLevel=n,delete this.value},incrementValue:function(){var e=this.levels[this.currentLevel];e.items[e.index]++},nextLevel:function(){var e=this.currentLevel,t=this.levels[e],r=t.items[t.index];return--e<0?(this.value=r,!1):(this.currentLevel=e,(t=this.levels[e]).items[t.index]=r,!0)}},e}(),y=function(){function e(e,t,r){var n=a(Math.max(e,t))+1;this.levels=[];for(var i=0;i<n;i++){for(var o=new Uint8Array(e*t),s=0,c=o.length;s<c;s++)o[s]=r;var l={width:e,height:t,items:o};this.levels.push(l),e=Math.ceil(e/2),t=Math.ceil(t/2)}}return e.prototype={reset:function(e,t,r){for(var n=0;n<this.levels.length;){var i=this.levels[n],a=e+t*i.width;i.index=a;var o=i.items[a];if(255===o)break;if(o>r)return this.currentLevel=n,this.propagateValues(),!1;e>>=1,t>>=1,n++}return this.currentLevel=n-1,!0},incrementValue:function(e){var t=this.levels[this.currentLevel];t.items[t.index]=e+1,this.propagateValues()},propagateValues:function(){for(var e=this.currentLevel,t=this.levels[e],r=t.items[t.index];--e>=0;)(t=this.levels[e]).items[t.index]=r},nextLevel:function(){var e=this.currentLevel,t=this.levels[e],r=t.items[t.index];return t.items[t.index]=255,!(--e<0)&&(this.currentLevel=e,(t=this.levels[e]).items[t.index]=r,!0)}},e}(),b=function(){var e=new Uint8Array([0,5,8,0,3,7,8,0,4,7,8,0,0,0,0,0,1,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8]),t=new Uint8Array([0,3,4,0,5,7,7,0,8,8,8,0,0,0,0,0,1,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8]),r=new Uint8Array([0,1,2,0,1,2,2,0,2,2,2,0,0,0,0,0,3,4,5,0,4,5,5,0,5,5,5,0,0,0,0,0,6,7,7,0,7,7,7,0,7,7,7,0,0,0,0,0,8,8,8,0,8,8,8,0,8,8,8,0,0,0,0,0,8,8,8,0,8,8,8,0,8,8,8]);function n(n,i,a,o,s){this.width=n,this.height=i,this.contextLabelTable="HH"===a?r:"HL"===a?t:e;var c=n*i;this.neighborsSignificance=new Uint8Array(c),this.coefficentsSign=new Uint8Array(c),this.coefficentsMagnitude=s>14?new Uint32Array(c):s>6?new Uint16Array(c):new Uint8Array(c),this.processingFlags=new Uint8Array(c);var l=new Uint8Array(c);if(0!==o)for(var f=0;f<c;f++)l[f]=o;this.bitsDecoded=l,this.reset()}return n.prototype={setDecoder:function(e){this.decoder=e},reset:function(){this.contexts=new Int8Array(19),this.contexts[0]=8,this.contexts[17]=92,this.contexts[18]=6},setNeighborsSignificance:function(e,t,r){var n,i=this.neighborsSignificance,a=this.width,o=this.height,s=t>0,c=t+1<a;e>0&&(n=r-a,s&&(i[n-1]+=16),c&&(i[n+1]+=16),i[n]+=4),e+1<o&&(n=r+a,s&&(i[n-1]+=16),c&&(i[n+1]+=16),i[n]+=4),s&&(i[r-1]+=1),c&&(i[r+1]+=1),i[r]|=128},runSignificancePropogationPass:function(){for(var e=this.decoder,t=this.width,r=this.height,n=this.coefficentsMagnitude,i=this.coefficentsSign,a=this.neighborsSignificance,o=this.processingFlags,s=this.contexts,c=this.contextLabelTable,l=this.bitsDecoded,f=0;f<r;f+=4)for(var h=0;h<t;h++)for(var u=f*t+h,d=0;d<4;d++,u+=t){var p=f+d;if(p>=r)break;if(o[u]&=-2,!n[u]&&a[u]){var m=c[a[u]];if(e.readBit(s,m)){var g=this.decodeSignBit(p,h,u);i[u]=g,n[u]=1,this.setNeighborsSignificance(p,h,u),o[u]|=2}l[u]++,o[u]|=1}}},decodeSignBit:function(e,t,r){var n,i,a,o,s,c,l=this.width,f=this.height,h=this.coefficentsMagnitude,u=this.coefficentsSign;o=t>0&&0!==h[r-1],t+1<l&&0!==h[r+1]?(a=u[r+1],n=o?1-a-(i=u[r-1]):1-a-a):n=o?1-(i=u[r-1])-i:0;var d=3*n;return o=e>0&&0!==h[r-l],e+1<f&&0!==h[r+l]?(a=u[r+l],n=o?1-a-(i=u[r-l])+d:1-a-a+d):n=o?1-(i=u[r-l])-i+d:d,n>=0?(s=9+n,c=this.decoder.readBit(this.contexts,s)):(s=9-n,c=1^this.decoder.readBit(this.contexts,s)),c},runMagnitudeRefinementPass:function(){for(var e,t=this.decoder,r=this.width,n=this.height,i=this.coefficentsMagnitude,a=this.neighborsSignificance,o=this.contexts,s=this.bitsDecoded,c=this.processingFlags,l=r*n,f=4*r,h=0;h<l;h=e){e=Math.min(l,h+f);for(var u=0;u<r;u++)for(var d=h+u;d<e;d+=r)if(i[d]&&(1&c[d])==0){var p=16;(2&c[d])!=0&&(c[d]^=2,p=0==(127&a[d])?15:14);var m=t.readBit(o,p);i[d]=i[d]<<1|m,s[d]++,c[d]|=1}}},runCleanupPass:function(){for(var e=this.decoder,t=this.width,r=this.height,n=this.neighborsSignificance,i=this.coefficentsMagnitude,a=this.coefficentsSign,o=this.contexts,s=this.contextLabelTable,c=this.bitsDecoded,l=this.processingFlags,f=2*t,h=3*t,u=0;u<r;u=g){g=Math.min(u+4,r);for(var d=u*t,p=u+3<r,m=0;m<t;m++){var g,v,y=d+m,b=p&&0===l[y]&&0===l[y+t]&&0===l[y+f]&&0===l[y+h]&&0===n[y]&&0===n[y+t]&&0===n[y+f]&&0===n[y+h],x=0,w=y,C=u;if(b){if(!e.readBit(o,18)){c[y]++,c[y+t]++,c[y+f]++,c[y+h]++;continue}0!=(x=e.readBit(o,17)<<1|e.readBit(o,17))&&(C=u+x,w+=x*t),v=this.decodeSignBit(C,m,w),a[w]=v,i[w]=1,this.setNeighborsSignificance(C,m,w),l[w]|=2,w=y;for(var P=u;P<=C;P++,w+=t)c[w]++;x++}for(C=u+x;C<g;C++,w+=t)if(!i[w]&&(1&l[w])==0){var I=s[n[w]];1===e.readBit(o,I)&&(v=this.decodeSignBit(C,m,w),a[w]=v,i[w]=1,this.setNeighborsSignificance(C,m,w),l[w]|=2),c[w]++}}}},checkSegmentationSymbol:function(){var e=this.decoder,t=this.contexts;if(10!=(e.readBit(t,17)<<3|e.readBit(t,17)<<2|e.readBit(t,17)<<1|e.readBit(t,17)))throw Error("JPX Error: Invalid segmentation symbol")}},n}(),x=function(){function e(){}return e.prototype.calculate=function(e,t,r){for(var n=e[0],i=1,a=e.length;i<a;i++)n=this.iterate(n,e[i],t,r);return n},e.prototype.extend=function(e,t,r){var n=t-1,i=t+1,a=t+r-2,o=t+r;e[n--]=e[i++],e[o++]=e[a--],e[n--]=e[i++],e[o++]=e[a--],e[n--]=e[i++],e[o++]=e[a--],e[n]=e[i],e[o]=e[a]},e.prototype.iterate=function(e,t,r,n){var i=e.width,a=e.height,o=e.items,s=t.width,c=t.height,l=t.items;for(m=0,d=0;d<a;d++)for(p=0,g=2*d*s;p<i;p++,m++,g+=2)l[g]=o[m];o=e.items=null;var f=new Float32Array(s+8);if(1===s){if((1&r)!=0)for(y=0,m=0;y<c;y++,m+=s)l[m]*=.5}else for(y=0,m=0;y<c;y++,m+=s)f.set(l.subarray(m,m+s),4),this.extend(f,4,s),this.filter(f,4,s),l.set(f.subarray(4,4+s),m);var h=16,u=[];for(d=0;d<h;d++)u.push(new Float32Array(c+8));var d,p,m,g,v,y,b,x=0;if(e=4+c,1===c){if((1&n)!=0)for(v=0;v<s;v++)l[v]*=.5}else for(v=0;v<s;v++){if(0===x){for(h=Math.min(s-v,h),m=v,g=4;g<e;m+=s,g++)for(b=0;b<h;b++)u[b][g]=l[m+b];x=h}var w=u[--x];if(this.extend(w,4,c),this.filter(w,4,c),0===x)for(g=4,m=v-h+1;g<e;m+=s,g++)for(b=0;b<h;b++)l[m+b]=u[b][g]}return{width:s,height:c,items:l}},e}(),w=function(){function e(){x.call(this)}return e.prototype=Object.create(x.prototype),e.prototype.filter=function(e,t,r){var n,i,a,o,s=r>>1;t|=0;for(n=t-3,i=s+4;i--;n+=2)e[n]*=.8128930661159609;for(a=.443506852043971*e[(n=t-2)-1],i=s+3;i--;n+=2)if(o=.443506852043971*e[n+1],e[n]=1.230174104914001*e[n]-a-o,i--)n+=2,a=.443506852043971*e[n+1],e[n]=1.230174104914001*e[n]-a-o;else break;for(a=.882911075530934*e[(n=t-1)-1],i=s+2;i--;n+=2)if(o=.882911075530934*e[n+1],e[n]-=a+o,i--)n+=2,a=.882911075530934*e[n+1],e[n]-=a+o;else break;for(a=-.052980118572961*e[(n=t)-1],i=s+1;i--;n+=2)if(o=-.052980118572961*e[n+1],e[n]-=a+o,i--)n+=2,a=-.052980118572961*e[n+1],e[n]-=a+o;else break;if(0!==s)for(a=-1.586134342059924*e[(n=t+1)-1],i=s;i--;n+=2)if(o=-1.586134342059924*e[n+1],e[n]-=a+o,i--)n+=2,a=-1.586134342059924*e[n+1],e[n]-=a+o;else break},e}(),C=function(){function e(){x.call(this)}return e.prototype=Object.create(x.prototype),e.prototype.filter=function(e,t,r){var n,i,a=r>>1;for(t|=0,n=t,i=a+1;i--;n+=2)e[n]-=e[n-1]+e[n+1]+2>>2;for(n=t+1,i=a;i--;n+=2)e[n]+=e[n-1]+e[n+1]>>1},e}();return t}(),i=function(){function e(){}function t(e,t,r){this.data=e,this.start=t,this.end=r}function n(e,t,r){var n=e.getContexts(t),i=1;function a(e){for(var t=0,a=0;a<e;a++){var o=r.readBit(n,i);i=i<256?i<<1|o:(i<<1|o)&511|256,t=t<<1|o}return t>>>0}var o=a(1),s=a(1)?a(1)?a(1)?a(1)?a(1)?a(32)+4436:a(12)+340:a(8)+84:a(6)+20:a(4)+4:a(2);return 0===o?s:s>0?-s:null}function i(e,t,r){for(var n=e.getContexts("IAID"),i=1,a=0;a<r;a++){var o=t.readBit(n,i);i=i<<1|o}return r<31?i&(1<<r)-1:0x7fffffff&i}e.prototype={getContexts:function(e){return e in this?this[e]:this[e]=new Int8Array(65536)}},t.prototype={get decoder(){return l(this,"decoder",new r(this.data,this.start,this.end))},get contextCache(){return l(this,"contextCache",new e)}};var h=["SymbolDictionary",null,null,null,"IntermediateTextRegion",null,"ImmediateTextRegion","ImmediateLosslessTextRegion",null,null,null,null,null,null,null,null,"patternDictionary",null,null,null,"IntermediateHalftoneRegion",null,"ImmediateHalftoneRegion","ImmediateLosslessHalftoneRegion",null,null,null,null,null,null,null,null,null,null,null,null,"IntermediateGenericRegion",null,"ImmediateGenericRegion","ImmediateLosslessGenericRegion","IntermediateGenericRefinementRegion",null,"ImmediateGenericRefinementRegion","ImmediateLosslessGenericRefinementRegion",null,null,null,null,"PageInformation","EndOfPage","EndOfStripe","EndOfFile","Profiles","Tables",null,null,null,null,null,null,null,null,"Extension"],u=[[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:2,y:-1},{x:-4,y:0},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}],[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:2,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:2,y:-1},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}],[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-2,y:0},{x:-1,y:0}],[{x:-3,y:-1},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-4,y:0},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}]],d=[{coding:[{x:0,y:-1},{x:1,y:-1},{x:-1,y:0}],reference:[{x:0,y:-1},{x:1,y:-1},{x:-1,y:0},{x:0,y:0},{x:1,y:0},{x:-1,y:1},{x:0,y:1},{x:1,y:1}]},{coding:[{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-1,y:0}],reference:[{x:0,y:-1},{x:-1,y:0},{x:0,y:0},{x:1,y:0},{x:0,y:1},{x:1,y:1}]}],p=[39717,1941,229,405],m=[32,8];function g(e,t,r,n,i,a,o,s){if(e&&f("JBIG2 error: MMR encoding is not supported"),0===n&&!a&&!i&&4===o.length&&3===o[0].x&&-1===o[0].y&&-3===o[1].x&&-1===o[1].y&&2===o[2].x&&-2===o[2].y&&-2===o[3].x&&-2===o[3].y)return function(e,t,r){var n,i,a,o,s,c,l,f=r.decoder,h=r.contextCache.getContexts("GB"),u=[];for(i=0;i<t;i++)for(a=0,s=u[i]=new Uint8Array(e),c=i<1?s:u[i-1],n=(l=i<2?s:u[i-2])[0]<<13|l[1]<<12|l[2]<<11|c[0]<<7|c[1]<<6|c[2]<<5|c[3]<<4;a<e;a++)s[a]=o=f.readBit(h,n),n=(31735&n)<<1|(a+3<e?l[a+3]<<11:0)|(a+4<e?c[a+4]<<4:0)|o;return u}(t,r,s);var c=!!a,l=u[n].concat(o);l.sort(function(e,t){return e.y-t.y||e.x-t.x});var h=l.length,d=new Int8Array(h),m=new Int8Array(h),g=[],v=0,y=0,b=0,x=0;for(A=0;A<h;A++)d[A]=l[A].x,m[A]=l[A].y,y=Math.min(y,l[A].x),b=Math.max(b,l[A].x),x=Math.min(x,l[A].y),A<h-1&&l[A].y===l[A+1].y&&l[A].x===l[A+1].x-1?v|=1<<h-1-A:g.push(A);var w=g.length,C=new Int8Array(w),P=new Int8Array(w),I=new Uint16Array(w);for(k=0;k<w;k++)A=g[k],C[k]=l[A].x,P[k]=l[A].y,I[k]=1<<h-1-A;for(var k,A,S,T,M,E,O,L=-y,D=-x,U=t-b,z=p[n],F=new Uint8Array(t),B=[],$=s.decoder,R=s.contextCache.getContexts("GB"),_=0,q=0,J=0;J<r;J++){if(i&&(_^=$.readBit(R,z))){B.push(F);continue}for(F=new Uint8Array(F),B.push(F),S=0;S<t;S++){if(c&&a[J][S]){F[S]=0;continue}if(S>=L&&S<U&&J>=D)for(A=0,q=q<<1&v;A<w;A++)T=J+P[A],M=S+C[A],(E=B[T][M])&&(q|=E=I[A]);else for(A=0,q=0,O=h-1;A<h;A++,O--)(M=S+d[A])>=0&&M<t&&(T=J+m[A])>=0&&(E=B[T][M])&&(q|=E<<O);var N=$.readBit(R,q);F[S]=N}}return B}function v(e,t,r,n,i,a,o,s,c){var l=d[r].coding;0===r&&(l=l.concat([s[0]]));var h=l.length,u=new Int32Array(h),p=new Int32Array(h);for(E=0;E<h;E++)u[E]=l[E].x,p[E]=l[E].y;var g=d[r].reference;0===r&&(g=g.concat([s[1]]));var v=g.length,y=new Int32Array(v),b=new Int32Array(v);for(E=0;E<v;E++)y[E]=g[E].x,b[E]=g[E].y;for(var x=n[0].length,w=n.length,C=m[r],P=[],I=c.decoder,k=c.contextCache.getContexts("GR"),A=0,S=0;S<t;S++){o&&(A^=I.readBit(k,C))&&f("JBIG2 error: prediction is not supported");var T=new Uint8Array(e);P.push(T);for(var M=0;M<e;M++){var E,O,L,D=0;for(E=0;E<h;E++)O=S+p[E],L=M+u[E],O<0||L<0||L>=e?D<<=1:D=D<<1|P[O][L];for(E=0;E<v;E++)O=S+b[E]+a,L=M+y[E]+i,O<0||O>=w||L<0||L>=x?D<<=1:D=D<<1|n[O][L];var U=I.readBit(k,D);T[M]=U}}return P}function y(e,t,r,a,o,s,c,l,h,u,d,p,m,g,y,b,x){e&&f("JBIG2 error: huffman is not supported");var w=[];for(T=0;T<a;T++){if(M=new Uint8Array(r),o)for(var C=0;C<r;C++)M[C]=o;w.push(M)}var P=x.decoder,I=x.contextCache,k=-n(I,"IADT",P),A=0;for(T=0;T<s;){k+=n(I,"IADT",P);for(var S=A+=n(I,"IAFS",P);;){var T,M,E,O,L,D=1===c?0:n(I,"IAIT",P),U=c*k+D,z=i(I,P,h),F=t&&n(I,"IARI",P),B=l[z],$=B[0].length,R=B.length;if(F){var _=n(I,"IARDW",P),q=n(I,"IARDH",P),J=n(I,"IARDX",P),N=n(I,"IARDY",P);$+=_,R+=q,B=v($,R,y,B,(_>>1)+J,(q>>1)+N,!1,b,x)}var X=U-(1&p?0:R),H=S-(2&p?$:0);if(u){for(E=0;E<R;E++)if(M=w[H+E]){L=B[E];var G=Math.min(r-X,$);switch(m){case 0:for(O=0;O<G;O++)M[X+O]|=L[O];break;case 2:for(O=0;O<G;O++)M[X+O]^=L[O];break;default:f("JBIG2 error: operator "+m+" is not supported")}}S+=R-1}else{for(O=0;O<R;O++)if(M=w[X+O])switch(L=B[O],m){case 0:for(E=0;E<$;E++)M[H+E]|=L[E];break;case 2:for(E=0;E<$;E++)M[H+E]^=L[E];break;default:f("JBIG2 error: operator "+m+" is not supported")}S+=$-1}T++;var Y=n(I,"IADS",P);if(null===Y)break;S+=Y+d}}return w}function b(e,t){return{width:c(e,t),height:c(e,t+4),x:c(e,t+8),y:c(e,t+12),combinationOperator:7&e[t+16]}}function x(){}function w(){}return x.prototype={onPageInformation:function(e){this.currentPageInfo=e;var t=new Uint8Array((e.width+7>>3)*e.height);if(e.defaultPixelValue)for(var r=0,n=t.length;r<n;r++)t[r]=255;this.buffer=t},drawBitmap:function(e,t){var r,n,i,a,o=this.currentPageInfo,s=e.width,c=e.height,l=o.width+7>>3,h=o.combinationOperatorOverride?e.combinationOperator:o.combinationOperator,u=this.buffer,d=128>>(7&e.x),p=e.y*l+(e.x>>3);switch(h){case 0:for(r=0;r<c;r++){for(n=0,i=d,a=p;n<s;n++)t[r][n]&&(u[a]|=i),!(i>>=1)&&(i=128,a++);p+=l}break;case 2:for(r=0;r<c;r++){for(n=0,i=d,a=p;n<s;n++)t[r][n]&&(u[a]^=i),!(i>>=1)&&(i=128,a++);p+=l}break;default:f("JBIG2 error: operator "+h+" is not supported")}},onImmediateGenericRegion:function(e,r,n,i){var a=e.info,o=new t(r,n,i),s=g(e.mmr,a.width,a.height,e.template,e.prediction,null,e.at,o);this.drawBitmap(a,s)},onImmediateLosslessGenericRegion:function(){this.onImmediateGenericRegion.apply(this,arguments)},onSymbolDictionary:function(e,r,o,s,c,l){e.huffman&&f("JBIG2 error: huffman is not supported");var h,u=this.symbols;u||(this.symbols=u={});for(var d=[],p=0,m=o.length;p<m;p++)d=d.concat(u[o[p]]);var b=new t(s,c,l);u[r]=function(e,t,r,o,s,c,l,h,u,d,p){e&&f("JBIG2 error: huffman is not supported");for(var m=[],b=0,x=a(r.length+o),w=p.decoder,C=p.contextCache;m.length<o;){b+=n(C,"IADH",w);for(var P=0;;){var I,k=n(C,"IADW",w);if(null===k)break;if(P+=k,t){var A=n(C,"IAAI",w);if(A>1)I=y(e,t,P,b,0,A,1,r.concat(m),x,0,0,1,0,c,u,d,p);else{var S=i(C,w,x),T=n(C,"IARDX",w),M=n(C,"IARDY",w);I=v(P,b,u,S<r.length?r[S]:m[S-r.length],T,M,!1,d,p)}}else I=g(!1,P,b,l,!1,null,h,p);m.push(I)}}for(var E=[],O=[],L=!1,D=r.length+o;O.length<D;){for(var U=n(C,"IAEX",w);U--;)O.push(L);L=!L}for(var z=0,F=r.length;z<F;z++)O[z]&&E.push(r[z]);for(var B=0;B<o;z++,B++)O[z]&&E.push(m[B]);return E}(e.huffman,e.refinement,d,e.numberOfNewSymbols,e.numberOfExportedSymbols,h,e.template,e.at,e.refinementTemplate,e.refinementAt,b)},onImmediateTextRegion:function(e,r,n,i,o){for(var s,c=e.info,l=this.symbols,f=[],h=0,u=r.length;h<u;h++)f=f.concat(l[r[h]]);var d=a(f.length),p=new t(n,i,o),m=y(e.huffman,e.refinement,c.width,c.height,e.defaultPixelValue,e.numberOfSymbolInstances,e.stripSize,f,d,e.transposed,e.dsOffset,e.referenceCorner,e.combinationOperator,s,e.refinementTemplate,e.refinementAt,p);this.drawBitmap(c,m)},onImmediateLosslessTextRegion:function(){this.onImmediateTextRegion.apply(this,arguments)}},w.prototype={parseChunks:function(e){return function(e){for(var t=new x,r=0,n=e.length;r<n;r++){var i=e[r];!function(e,t){for(var r=0,n=e.length;r<n;r++)!function(e,t){var r,n,i,a,l=e.header,h=e.data,u=e.start,d=e.end;switch(l.type){case 0:var p={},m=s(h,u);if(p.huffman=!!(1&m),p.refinement=!!(2&m),p.huffmanDHSelector=m>>2&3,p.huffmanDWSelector=m>>4&3,p.bitmapSizeSelector=m>>6&1,p.aggregationInstancesSelector=m>>7&1,p.bitmapCodingContextUsed=!!(256&m),p.bitmapCodingContextRetained=!!(512&m),p.template=m>>10&3,p.refinementTemplate=m>>12&1,u+=2,!p.huffman){for(i=0,a=0===p.template?4:1,n=[];i<a;i++)n.push({x:o(h,u),y:o(h,u+1)}),u+=2;p.at=n}if(p.refinement&&!p.refinementTemplate){for(i=0,n=[];i<2;i++)n.push({x:o(h,u),y:o(h,u+1)}),u+=2;p.refinementAt=n}p.numberOfExportedSymbols=c(h,u),u+=4,p.numberOfNewSymbols=c(h,u),u+=4,r=[p,l.number,l.referredTo,h,u,d];break;case 6:case 7:var g={};g.info=b(h,u);var v=s(h,u+=17);if(u+=2,g.huffman=!!(1&v),g.refinement=!!(2&v),g.stripSize=1<<(v>>2&3),g.referenceCorner=v>>4&3,g.transposed=!!(64&v),g.combinationOperator=v>>7&3,g.defaultPixelValue=v>>9&1,g.dsOffset=v<<17>>27,g.refinementTemplate=v>>15&1,g.huffman){var y=s(h,u);u+=2,g.huffmanFS=3&y,g.huffmanDS=y>>2&3,g.huffmanDT=y>>4&3,g.huffmanRefinementDW=y>>6&3,g.huffmanRefinementDH=y>>8&3,g.huffmanRefinementDX=y>>10&3,g.huffmanRefinementDY=y>>12&3,g.huffmanRefinementSizeSelector=!!(14&y)}if(g.refinement&&!g.refinementTemplate){for(i=0,n=[];i<2;i++)n.push({x:o(h,u),y:o(h,u+1)}),u+=2;g.refinementAt=n}g.numberOfSymbolInstances=c(h,u),u+=4,g.huffman&&f("JBIG2 error: huffman is not supported"),r=[g,l.referredTo,h,u,d];break;case 38:case 39:var x={};x.info=b(h,u),u+=17;var w=h[u++];if(x.mmr=!!(1&w),x.template=w>>1&3,x.prediction=!!(8&w),!x.mmr){for(i=0,a=0===x.template?4:1,n=[];i<a;i++)n.push({x:o(h,u),y:o(h,u+1)}),u+=2;x.at=n}r=[x,h,u,d];break;case 48:var C={width:c(h,u),height:c(h,u+4),resolutionX:c(h,u+8),resolutionY:c(h,u+12)};0xffffffff===C.height&&delete C.height;var P=h[u+16];s(h,u+17),C.lossless=!!(1&P),C.refinement=!!(2&P),C.defaultPixelValue=P>>2&1,C.combinationOperator=P>>3&3,C.requiresBuffer=!!(32&P),C.combinationOperatorOverride=!!(64&P),r=[C];break;case 49:case 50:case 51:case 62:break;default:f("JBIG2 error: segment type "+l.typeName+"("+l.type+") is not implemented")}var I="on"+l.typeName;I in t&&t[I].apply(t,r)}(e[r],t)}(function(e,t,r,n){for(var i=[],a=r;a<n;){var o=function(e,t){var r,n,i={};i.number=c(e,t);var a=e[t+4],o=63&a;h[o]||f("JBIG2 error: invalid segment type: "+o),i.type=o,i.typeName=h[o],i.deferredNonRetain=!!(128&a);var l=e[t+5],u=l>>5&7,d=[31&l],p=t+6;if(7===l){u=0x1fffffff&c(e,p-1),p+=3;var m=u+7>>3;for(d[0]=e[p++];--m>0;)d.push(e[p++])}else(5===l||6===l)&&f("JBIG2 error: invalid referred-to flags");i.retainBits=d;var g=i.number<=256?1:i.number<=65536?2:4,v=[];for(r=0;r<u;r++){var y=1===g?e[p]:2===g?s(e,p):c(e,p);v.push(y),p+=g}if(i.referredTo=v,64&a?(i.pageAssociation=c(e,p),p+=4):i.pageAssociation=e[p++],i.length=c(e,p),p+=4,0xffffffff===i.length){if(38===o){var x=b(e,p),w=e[p+17],C=new Uint8Array(6);for(1&w||(C[0]=255,C[1]=172),C[2]=x.height>>>24&255,C[3]=x.height>>16&255,C[4]=x.height>>8&255,C[5]=255&x.height,r=p,n=e.length;r<n;r++){for(var P=0;P<6&&C[P]===e[r+P];)P++;if(6===P){i.length=r+6;break}}0xffffffff===i.length&&f("JBIG2 error: segment end was not found")}else f("JBIG2 error: invalid unknown segment length")}return i.headerEnd=p,i}(t,a);a=o.headerEnd;var l={header:o,data:t};if(e.randomAccess||(l.start=a,a+=o.length,l.end=a),i.push(l),51===o.type)break}if(e.randomAccess)for(var u=0,d=i.length;u<d;u++)i[u].start=a,a+=i[u].header.length,i[u].end=a;return i}({},i.data,i.start,i.end),t)}return t}(e)}},w}();function a(e){for(var t=1,r=0;e>t;)t<<=1,r++;return r}function o(e,t){return e[t]<<24>>24}function s(e,t){return e[t]<<8|e[t+1]}function c(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!1}),r}var f=function(){throw console.error.apply(console,arguments),Error("PDFJS error: "+arguments[0])},h=function(){console.warn.apply(console,arguments)},u=function(){console.info.apply(console,arguments)};i.prototype.parse=function(e){var t=0,r=e.length;(151!==e[t]||74!==e[t+1]||66!==e[t+2]||50!==e[t+3]||13!==e[t+4]||10!==e[t+5]||26!==e[t+6]||10!==e[t+7])&&f("JBIG2 error: invalid header");var n={};t+=8;var i=e[t++];n.randomAccess=!(1&i),2&i||(n.numberOfPages=c(e,t),t+=4);for(var a=this.parseChunks([{data:e,start:t,end:r}]),o=a.currentPageInfo.width,s=a.currentPageInfo.height,l=a.buffer,e=new Uint8Array(o*s),h=0,u=0,d=0;d<s;d++)for(var p,m=0,g=0;g<o;g++)m||(m=128,p=l[u++]),e[h++]=p&m?0:255,m>>=1;this.width=o,this.height=s,this.data=e},e.JpegImage=t,e.JpxImage=n,e.Jbig2Image=i}(C||(C={}));var w,C,P=C.JpegImage;C.JpxImage,C.Jbig2Image,s({id:"decodeJpeg"},async(e,t,r,n,i,a)=>{let o;let s=new P;if(s.parse(e),void 0!==t&&t!==s.width||void 0!==r&&r!==s.height||void 0!==n&&s.width*s.height!==n)throw Error(`JPEG data does not have the expected dimensions: width=${s.width}, height=${s.height}, expected width=${t}, expected height=${r}, expected area=${n}`);if(t=s.width,r=s.height,void 0!==i&&s.numComponents!==i)throw Error(`JPEG data does not have the expected number of components: components=${s.numComponents}, expected=${i}`);if(i=s.numComponents,1===s.numComponents)o=s.getData(s.width,s.height,!1);else if(3===s.numComponents){if(o=s.getData(s.width,s.height,!1),a){let e=t*r,n=new Uint8Array(e);for(let t=0;t<e;++t)n[t]=o[3*t];o=n}else o=l(o,s.width*s.height,3)}else throw Error(`JPEG data has an unsupported number of components: components=${s.numComponents}`);return{value:{width:t,height:r,numComponents:i,uint8Array:o},transfer:[o.buffer]}});let I={emscripten_notify_memory_growth:()=>{},proc_exit:e=>{throw`proc exit: ${e}`}},k=[137,80,78,71,13,10,26,10],A=["I","H","D","R"];async function S(e,t,i,a,o,s,c){let f=await (void 0===n&&(n=(async()=>{let e=(await WebAssembly.instantiateStreaming(fetch(new URL(r(9266),r.b)),{env:I,wasi_snapshot_preview1:I})).instance;return e.exports._initialize(),e})()),n),{sx:h,sy:u,dataWidth:d,numChannels:p}=function(e){function t(e,t){return e.every((e,r)=>e===t[r])}if(e.length<12)throw Error(`png: Invalid image size: ${e.length}`);if(!t(k,e))throw Error(`png: didn't match magic numbers: ${e.slice(0,8)}`);let r=new DataView(e.buffer,k.length),n=r.getUint32(0,!1);if(e.length<k.length+n+12)throw Error(`png: Invalid image size: ${e.length}`);let i=[4,5,6,7].map(e=>String.fromCharCode(r.getUint8(e)));if(!t(i,A))throw Error(`png: Invalid header code (should be IHDR): ${i}`);let a=r.getUint32(8,!1),o=r.getUint32(12,!1),s=r.getUint8(16),c=r.getUint8(17),l=r.getUint8(18),f=r.getUint8(19),h=r.getUint8(20);if(0===a||0===o)throw Error(`png: 0 is not a valid width or height. width: ${a} height: ${o}`);if(0!==l)throw Error(`png: Invalid compression method Only 0 is supported (DEFLATE). Got: ${l}`);if(0!==f)throw Error(`png: Invalid filter method. Only 0 (adaptive filtering) is supported. Got: ${f}`);if(h>1)throw Error(`png: invalid interlace method. Only 0 (no interlace) and 1 (adam7) are supported. Got: ${h}`);let u=[1,2,4,8,16];if(-1===u.indexOf(s))throw Error(`png: invalid bit depth. Got: ${s} Valid Depths: ${u}`);let d=s<=8?1:2,p=1;if(0===c);else if(2===c){if(8!==s&&16!==s)throw Error(`png: invalid bit depth for RGB colorspace. Got: ${s}`);p=3}else if(3===c)d=1,p=3;else if(6===c){if(8!==s&&16!==s)throw Error(`png: invalid bit depth for RGBA colorspace. Got: ${s}`);p=4}else if(4===c){if(8!==s&&16!==s)throw Error(`png: invalid bit depth for grayscale + alpha channel colorspace. Got: ${s}`);p=2}else throw Error(`png: Invalid color space: ${c}`);return{sx:a,sy:o,dataWidth:d,numChannels:p}}(e);if(c&&(d=1,p=1),void 0!==t&&h!==t||void 0!==i&&u!==i||void 0!==a&&h*u!==a||void 0!==o&&o!==p||s!==d)throw Error(`png: Image decode parameters did not match expected chunk parameters.  Expected: width: ${t} height: ${i} area: ${a} channels: ${o} bytes per pixel: ${s}.  Decoded:  width: ${h} height: ${u} channels: ${p} bytes per pixel: ${d}.  Convert to Grayscale? ${c}`);let m=h*u*d*p;if(m<0)throw Error(`png: Failed to decode png image size. image size: ${m}`);let g=f.exports.malloc(e.byteLength),v=f.exports.malloc(m);new Uint8Array(f.exports.memory.buffer).set(e,g);let y=f.exports.png_decompress(g,e.byteLength,v,m,c);try{if(0!==y)throw Error(`png: Failed to decode png image. decoder code: ${y}`);let e=new Uint8Array(f.exports.memory.buffer,v,m);return 1!==p&&(e=l(e,h*u,p)),{width:h,height:u,numComponents:p,uint8Array:e.slice(0)}}finally{f.exports.free(g),f.exports.free(v)}}async function T(e,t,r){try{var n,i,a;let o=(n=e instanceof Response?e:new Response(e),i=t,a=r,n.body.pipeThrough(new DecompressionStream(i),{signal:a}));return await new Response(o).arrayBuffer()}catch{throw r?.throwIfAborted(),Error(`Failed to decode ${t}`)}}async function M(e){let t;return!function(e){let t=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);return t.length>=3&&31===t[0]&&139===t[1]&&8===t[2]}(t=e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength))?t:new Uint8Array(await T(t,"gzip"))}s({id:"decodePng"},async(e,t,r,n,i,a,o)=>{let s=await S(e,t,r,n,i,a,o);return{value:s,transfer:[s.uint8Array.buffer]}}),s({id:"decodeBlosc"},async e=>{let{default:t}=await r.e("733").then(r.bind(r,2925)),n=t.fromConfig({id:"blosc"}),i=await n.decode(e);return{value:i,transfer:[i.buffer]}}),s({id:"decodeZstd"},async e=>{let{default:t}=await r.e("174").then(r.bind(r,8165)),n=t.fromConfig({id:"blosc"}),i=await n.decode(e);return{value:i,transfer:[i.buffer]}}),s({id:"parseOBJFromArrayBuffer"},async e=>{let t=new TextDecoder().decode(await M(e));t=t.replace(/#.*/g,"");let r=new f(Float32Array),n=new f(Uint32Array);for(let e of t.matchAll(/^v\s+([-0-9.eE]+)\s+([-0-9.eE]+)\s+([-0-9.eE]+)\s*$/gm))r.appendArray([parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])]);for(let e of t.matchAll(/^f\s+([0-9]+)\s+([0-9]+)\s+([0-9]+)\s*$/gm))n.appendArray([parseInt(e[1],10)-1,parseInt(e[2],10)-1,parseInt(e[3],10)-1]);r.shrinkToFit(),n.shrinkToFit();let i={info:{numVertices:r.length/3,numTriangles:n.length/3,vertexAttributes:[]},vertexPositions:r.view,indices:n.view,vertexAttributes:[]},a=i.vertexPositions.byteLength+i.indices.byteLength;return console.log(i),{value:{data:i,size:a},transfer:[i.indices.buffer,i.vertexPositions.buffer]}});let E={};async function O(){return void 0===i&&(i=(async()=>(await WebAssembly.instantiateStreaming(fetch(new URL(r(1088),r.b)),{env:E,wasi_snapshot_preview1:E})).instance)()),i}let L=[0,0,0,12,74,88,76,32,13,10,135,10];async function D(e,t,r,n){let i=await O();!function(e){let t=e.length;if(t<12)throw Error(`jxl: Invalid image size: ${t}`);if(t>=1&&255===e[0]){if(t<2)throw Error(`jxl: Not enough bytes. Got: ${t}`);if(10===e[1])return;throw Error("jxl: Invalid codestream.")}if(!L.every((t,r)=>t===e[r]))throw Error(`jxl: didn't match magic numbers: ${e.slice(0,12)}`)}(e);let a=(t||=0)*n*(r||=1),o=i.exports.malloc(e.byteLength);new Uint8Array(i.exports.memory.buffer).set(e,o);let s=null;try{let n=i.exports.width(o,e.byteLength,a),c=i.exports.height(o,e.byteLength,a);if(n<=0||c<=0)throw Error(`jxl: Decoding failed. Width (${n}) and/or height (${c}) invalid.`);if(void 0!==t&&n*c!==t)throw Error(`jxl: Expected width and height (${n} x ${c}, ${n*c}) to match area: ${t}.`);if(s=i.exports.decode(o,e.byteLength,a),0===s)throw Error("jxl: Decoding failed. Null pointer returned.");let l=new Uint8Array(i.exports.memory.buffer,s,a);return{width:n||0,height:c||0,numComponents:r||1,uint8Array:l.slice(0)}}finally{i.exports.free(o,e.byteLength),s&&i.exports.free(s,a)}}s({id:"decodeJxl"},async(e,t,r,n)=>{let i=await D(e,t,r,n);return{value:i,transfer:[i.uint8Array.buffer]}});let U={emscripten_notify_memory_growth:()=>{},proc_exit:e=>{throw`proc exit: ${e}`}};async function z(e){let t=await (void 0===a&&(a=(async()=>{let e=(await WebAssembly.instantiateStreaming(fetch(new URL(r(4472),r.b)),{env:U,wasi_snapshot_preview1:U})).instance;return e.exports._initialize(),e})()),a),{sx:n,sy:i,sz:o,dataWidth:s}=function(e){if(!(99===e[0]&&112===e[1]&&115===e[2]&&111===e[3]))throw Error("compresso: didn't match magic numbers");if(e[4]>1)throw Error("compresso: didn't match format version");let t=new DataView(e.buffer,0),r=e[5],n=t.getUint16(6,!0);return{sx:n,sy:t.getUint16(8,!0),sz:t.getUint16(10,!0),dataWidth:r}}(e),c=n*i*o,l=c*s;if(l<0)throw Error(`Failed to decode compresso image. image size: ${l}`);let f=t.exports.malloc(l),h=t.exports.malloc(e.byteLength);new Uint8Array(t.exports.memory.buffer).set(e,h);let u=t.exports.compresso_decompress(h,e.byteLength,f);try{if(0!==u)throw Error(`Failed to decode compresso image. decoder code: ${u}`);return new Uint8Array(t.exports.memory.buffer,f,c*s).slice(0)}finally{t.exports.free(h),t.exports.free(f)}}s({id:"decodeCompresso"},async e=>{let t=await z(e);return{value:t,transfer:[t.buffer]}});let F=/^[ \t]*#[ \t]+vtk[ \t]+DataFile[ \t]+Version[ \t]+([^\s]+)[ \t]*\n(.*)\n[ \t]*(ASCII|BINARY)[ \t]*\n[ \t]*DATASET[ \t]+([^ ]+)[ \t]*\n/,B=/^[ \t]*POINT_DATA[ \t]+([0-9]+)[ \t]*$/,$=/^[ \t]*POINTS[ \t]+([0-9]+)[ \t]+([^\s]+)[ \t]*$/,R=/^[ \t]*SCALARS[ \t]+([^\s]+)[ \t]+([^\s]+)(?:[ \t]+([0-9]+))?[ \t]*$/,_=/^[ \t]*LOOKUP_TABLE[ \t]+([^\s]+)[ \t]*$/,q=/^[ \t]*POLYGONS[ \t]+([0-9]+)[ \t]+([0-9]+)[ \t]*$/,J=/^[ \t]*3[ \t]+([0-9]+)[ \t]+([0-9]+)[ \t]+([0-9]+)[ \t]*$/,N=/^[ \t]*$/;class X{header;numVertices;vertexPositions;numTriangles;indices;vertexAttributes;constructor(e,t,r,n,i,a){this.header=e,this.numVertices=t,this.vertexPositions=r,this.numTriangles=n,this.indices=i,this.vertexAttributes=a}}let H=new Map([["POLYDATA",function(e,t){let r,n;let i=new TextDecoder().decode(t).split("\n"),a=i.length,o=0,s=-1,c=-1,l=[];function f(e,t,r,n){let s=RegExp("^[ 	]*"+"([^s]+)[ 	]+".repeat(r-1)+"([^s]+)[ 	]*$");if(a-o<t)throw Error(`VTK data ended unexpectedly while parsing ${e}.`);let c=new Float32Array(t*r),l=0;for(let n=0;n<t;++n){let t=i[o++],a=t.match(s);if(null===a)throw Error(`Failed to parse ${e} line ${n}: ${JSON.stringify(t)}.`);for(let e=0;e<r;++e)c[l++]=parseFloat(a[e+1])}return c}for(;o<a;){let e;let t=i[o];if(t.match(N)){++o;continue}if(null!==(e=t.match($))){++o,function(e,t){if(void 0!==n)throw Error("POINTS specified more than once.");s=e,r=f("POINTS",e,3,t)}(parseInt(e[1],10),e[2]);continue}if(null!==(e=t.match(q))){++o,function(e,t){if(void 0!==n)throw Error("VERTICES specified more than once.");if(a-o<e)throw Error("VTK data ended unexpectedly");if(t!==4*e)throw Error("Only triangular faces are supported.");c=e,n=new Uint32Array(3*e);let r=0;for(let t=0;t<e;++t){let e=i[o++].match(J);if(null===e)throw Error(`Failed to parse indices for face ${t}`);n[r++]=parseInt(e[1],10),n[r++]=parseInt(e[2],10),n[r++]=parseInt(e[3],10)}}(parseInt(e[1],10),parseInt(e[2],10));continue}if(null!==(e=t.match(B))){++o,function(e){if(s!==e)throw Error(`Number of vertices specified in POINT_DATA section (${e}) must match number of points (${s}).`);for(;o<a;){let e=i[o];if(e.match(N)){++o;continue}let t=e.match(R);if(null!==t){let e;e=void 0===t[3]?1:parseInt(t[3],10),++o,function(e,t,r){if(o===a)throw Error("Expected LOOKUP_TABLE directive.");let n=i[o++],c=n.match(_);if(null===c)throw Error(`Expected LOOKUP_TABLE directive in ${JSON.stringify(n)}.`);let h=c[1],u=f(`SCALARS(${e})`,s,r,t);l.push({name:e,data:u,numComponents:r,dataType:t,tableName:h})}(t[1],t[2],e)}}}(parseInt(e[1],10));break}throw Error(`Failed to parse VTK line ${JSON.stringify(t)}.`)}if(void 0===r)throw Error("Vertex positions not specified.");if(void 0===n)throw Error("Indices not specified.");return new X(e,s,r,c,n,l)}]]);s({id:"parseVTKFromArrayBuffer"},async e=>{let t=function(e){let t=new TextDecoder().decode(new Uint8Array(e.buffer,e.byteOffset,Math.min(e.byteLength,1e3))).match(F);if(null===t)throw Error("Failed to parse VTK file header.");let r=t[0].length,n=t[4],i=t[3],a={version:t[1],comment:t[2],datasetType:n,dataFormat:i},o=new Uint8Array(e.buffer,e.byteOffset+r,e.byteLength-r);if("ASCII"===i){let e=H.get(n);if(void 0===e)throw Error(`VTK dataset type ${JSON.stringify(n)} is not supported.`);return e(a,o)}throw Error(`VTK data format ${JSON.stringify(i)} is not supported.`)}(await M(e));return{value:{data:t,size:function(e){let t=e.vertexPositions.byteLength+e.indices.byteLength;for(let r of e.vertexAttributes)t+=r.data.byteLength;return t}(t)},transfer:[t.indices.buffer,t.vertexPositions.buffer,...Array.from(t.vertexAttributes.values()).map(e=>e.data.buffer)]}})}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,r),a.exports}r.m=e,r.x=()=>{var e=r.O(void 0,["822"],function(){return r(7376)});return r.O(e)},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.f={},r.e=function(e){return Promise.all(Object.keys(r.f).reduce(function(t,n){return r.f[n](e,t),t},[]))},r.u=function(e){return"822"===e?"822.c9ad3a05b434474b.js":""+e+"."+({174:"50e353543e20d218",733:"3e4d41581f5b1eae"})[e]+".js"},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},(()=>{var e=[];r.O=function(t,n,i,a){if(n){a=a||0;for(var o=e.length;o>0&&e[o-1][2]>a;o--)e[o]=e[o-1];e[o]=[n,i,a];return}for(var s=1/0,o=0;o<e.length;o++){for(var n=e[o][0],i=e[o][1],a=e[o][2],c=!0,l=0;l<n.length;l++)(!1&a||s>=a)&&Object.keys(r.O).every(function(e){return r.O[e](n[l])})?n.splice(l--,1):(c=!1,a<s&&(s=a));if(c){e.splice(o--,1);var f=i();void 0!==f&&(t=f)}}return t}})(),r.rv=function(){return"1.2.2"},(()=>{var e=r.x;r.x=function(){return r.e("822").then(e)}})(),(()=>{r.g.importScripts&&(e=r.g.location+"");var e,t=r.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var i=n.length-1;i>-1&&(!e||!/^http(s?):/.test(e));)e=n[i--].src}if(!e)throw Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=e})(),(()=>{r.b=self.location+"";var e={412:1};r.f.i=function(t,n){e[t]||importScripts(r.p+r.u(t))};var t=globalThis.webpackChunkneuroglancer=globalThis.webpackChunkneuroglancer||[],n=t.push.bind(t);t.push=function(t){var i=t[0],a=t[1],o=t[2];for(var s in a)r.o(a,s)&&(r.m[s]=a[s]);for(o&&o(r);i.length;)e[i.pop()]=1;n(t)}})(),r.ruid="bundler=rspack@1.2.2",r.x()})();
//# sourceMappingURL=412.d86e2b5b8b184d10.js.map